{"title":"$:/plugins/Gk0Wk/drawio","name":"draw.io","author":"Gk0Wk","description":"draw.io powerful diagram editor for TiddlyWiki","plugin-type":"plugin","version":"0.0.3","list":"readme config LICENSE","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/config/EditorTypeMappings/text/x-drawio\":{\"title\":\"$:/config/EditorTypeMappings/text/x-drawio\",\"text\":\"drawio\"},\"$:/config/EditorTypeMappings/application/vnd.drawio\":{\"title\":\"$:/config/EditorTypeMappings/application/vnd.drawio\",\"text\":\"drawio\"},\"$:/config/EditorTypeMappings/application/x-drawio\":{\"title\":\"$:/config/EditorTypeMappings/application/x-drawio\",\"text\":\"drawio\"},\"$:/plugins/Gk0Wk/drawio/LICENSE\":{\"title\":\"$:/plugins/Gk0Wk/drawio/LICENSE\",\"type\":\"text/plain\",\"text\":\"\\nMIT License\\n\\nCopyright (c) 2023 Gk0Wk(nmg_wk@yeah.net)\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\nSOFTWARE.\\n\"},\"$:/plugins/Gk0Wk/drawio/base64.min.js\":{\"title\":\"$:/plugins/Gk0Wk/drawio/base64.min.js\",\"text\":\"/**\\n * Minified by jsDelivr using Terser v5.15.1.\\n * Original file: /npm/js-base64@3.7.5/base64.js\\n *\\n * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files\\n */\\n!function(t,n){var r,e;\\\"object\\\"==typeof exports&&\\\"undefined\\\"!=typeof module?module.exports=n():\\\"function\\\"==typeof define&&define.amd?define(n):(r=t.Base64,(e=n()).noConflict=function(){return t.Base64=r,e},t.Meteor&&(Base64=e),t.Base64=e)}(\\\"undefined\\\"!=typeof self?self:\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof global?global:this,(function(){\\\"use strict\\\";var t,n=\\\"3.7.5\\\",r=\\\"function\\\"==typeof atob,e=\\\"function\\\"==typeof btoa,o=\\\"function\\\"==typeof Buffer,u=\\\"function\\\"==typeof TextDecoder?new TextDecoder:void 0,i=\\\"function\\\"==typeof TextEncoder?new TextEncoder:void 0,f=Array.prototype.slice.call(\\\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\\"),c=(t={},f.forEach((function(n,r){return t[n]=r})),t),a=/^(?:[A-Za-z\\\\d+\\\\/]{4})*?(?:[A-Za-z\\\\d+\\\\/]{2}(?:==)?|[A-Za-z\\\\d+\\\\/]{3}=?)?$/,d=String.fromCharCode.bind(String),s=\\\"function\\\"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){return new Uint8Array(Array.prototype.slice.call(t,0))},l=function(t){return t.replace(/=/g,\\\"\\\").replace(/[+\\\\/]/g,(function(t){return\\\"+\\\"==t?\\\"-\\\":\\\"_\\\"}))},h=function(t){return t.replace(/[^A-Za-z0-9\\\\+\\\\/]/g,\\\"\\\")},p=function(t){for(var n,r,e,o,u=\\\"\\\",i=t.length%3,c=0;c<t.length;){if((r=t.charCodeAt(c++))>255||(e=t.charCodeAt(c++))>255||(o=t.charCodeAt(c++))>255)throw new TypeError(\\\"invalid character found\\\");u+=f[(n=r<<16|e<<8|o)>>18&63]+f[n>>12&63]+f[n>>6&63]+f[63&n]}return i?u.slice(0,i-3)+\\\"===\\\".substring(i):u},y=e?function(t){return btoa(t)}:o?function(t){return Buffer.from(t,\\\"binary\\\").toString(\\\"base64\\\")}:p,A=o?function(t){return Buffer.from(t).toString(\\\"base64\\\")}:function(t){for(var n=[],r=0,e=t.length;r<e;r+=4096)n.push(d.apply(null,t.subarray(r,r+4096)));return y(n.join(\\\"\\\"))},b=function(t,n){return void 0===n&&(n=!1),n?l(A(t)):A(t)},g=function(t){if(t.length<2)return(n=t.charCodeAt(0))<128?t:n<2048?d(192|n>>>6)+d(128|63&n):d(224|n>>>12&15)+d(128|n>>>6&63)+d(128|63&n);var n=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return d(240|n>>>18&7)+d(128|n>>>12&63)+d(128|n>>>6&63)+d(128|63&n)},B=/[\\\\uD800-\\\\uDBFF][\\\\uDC00-\\\\uDFFFF]|[^\\\\x00-\\\\x7F]/g,x=function(t){return t.replace(B,g)},C=o?function(t){return Buffer.from(t,\\\"utf8\\\").toString(\\\"base64\\\")}:i?function(t){return A(i.encode(t))}:function(t){return y(x(t))},m=function(t,n){return void 0===n&&(n=!1),n?l(C(t)):C(t)},v=function(t){return m(t,!0)},U=/[\\\\xC0-\\\\xDF][\\\\x80-\\\\xBF]|[\\\\xE0-\\\\xEF][\\\\x80-\\\\xBF]{2}|[\\\\xF0-\\\\xF7][\\\\x80-\\\\xBF]{3}/g,F=function(t){switch(t.length){case 4:var n=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return d(55296+(n>>>10))+d(56320+(1023&n));case 3:return d((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return d((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},w=function(t){return t.replace(U,F)},S=function(t){if(t=t.replace(/\\\\s+/g,\\\"\\\"),!a.test(t))throw new TypeError(\\\"malformed base64.\\\");t+=\\\"==\\\".slice(2-(3&t.length));for(var n,r,e,o=\\\"\\\",u=0;u<t.length;)n=c[t.charAt(u++)]<<18|c[t.charAt(u++)]<<12|(r=c[t.charAt(u++)])<<6|(e=c[t.charAt(u++)]),o+=64===r?d(n>>16&255):64===e?d(n>>16&255,n>>8&255):d(n>>16&255,n>>8&255,255&n);return o},E=r?function(t){return atob(h(t))}:o?function(t){return Buffer.from(t,\\\"base64\\\").toString(\\\"binary\\\")}:S,D=o?function(t){return s(Buffer.from(t,\\\"base64\\\"))}:function(t){return s(E(t).split(\\\"\\\").map((function(t){return t.charCodeAt(0)})))},R=function(t){return D(T(t))},z=o?function(t){return Buffer.from(t,\\\"base64\\\").toString(\\\"utf8\\\")}:u?function(t){return u.decode(D(t))}:function(t){return w(E(t))},T=function(t){return h(t.replace(/[-_]/g,(function(t){return\\\"-\\\"==t?\\\"+\\\":\\\"/\\\"})))},Z=function(t){return z(T(t))},j=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},I=function(){var t=function(t,n){return Object.defineProperty(String.prototype,t,j(n))};t(\\\"fromBase64\\\",(function(){return Z(this)})),t(\\\"toBase64\\\",(function(t){return m(this,t)})),t(\\\"toBase64URI\\\",(function(){return m(this,!0)})),t(\\\"toBase64URL\\\",(function(){return m(this,!0)})),t(\\\"toUint8Array\\\",(function(){return R(this)}))},O=function(){var t=function(t,n){return Object.defineProperty(Uint8Array.prototype,t,j(n))};t(\\\"toBase64\\\",(function(t){return b(this,t)})),t(\\\"toBase64URI\\\",(function(){return b(this,!0)})),t(\\\"toBase64URL\\\",(function(){return b(this,!0)}))},P={version:n,VERSION:\\\"3.7.5\\\",atob:E,atobPolyfill:S,btoa:y,btoaPolyfill:p,fromBase64:Z,toBase64:m,encode:m,encodeURI:v,encodeURL:v,utob:x,btou:w,decode:Z,isValid:function(t){if(\\\"string\\\"!=typeof t)return!1;var n=t.replace(/\\\\s+/g,\\\"\\\").replace(/={0,2}$/,\\\"\\\");return!/[^\\\\s0-9a-zA-Z\\\\+/]/.test(n)||!/[^\\\\s0-9a-zA-Z\\\\-_]/.test(n)},fromUint8Array:b,toUint8Array:R,extendString:I,extendUint8Array:O,extendBuiltins:function(){I(),O()},Base64:{}};return Object.keys(P).forEach((function(t){return P.Base64[t]=P[t]})),P}));\\n\",\"type\":\"application/javascript\",\"source\":\"https://www.npmjs.com/package/js-base64\",\"module-type\":\"library\",\"Modern.TiddlyDev#Minify\":\"false\"},\"$:/plugins/Gk0Wk/drawio/config/theme-light\":{\"title\":\"$:/plugins/Gk0Wk/drawio/config/theme-light\",\"text\":\"Kennedy\"},\"$:/plugins/Gk0Wk/drawio/config/theme-dark\":{\"title\":\"$:/plugins/Gk0Wk/drawio/config/theme-dark\",\"text\":\"dark\"},\"$:/plugins/Gk0Wk/drawio/config\":{\"title\":\"$:/plugins/Gk0Wk/drawio/config\",\"tags\":\"$:/tags/ControlPanel/SettingsTab\",\"type\":\"text/vnd.tiddlywiki\",\"caption\":\"draw.io\",\"list-after\":\"$:/core/ui/ControlPanel/Settings/TiddlyWiki\",\"text\":\"\\\\define theme-selector(tiddler)\\n$tiddler$\\n<$select tiddler=\\\"$tiddler$\\\" default=\\\"Kennedy\\\">\\n<$list filter=\\\"[[Kennedy dark min simple atlas sketch]split[ ]unique[]]\\\">\\n<option value=<<currentTiddler>>><$text text=<<currentTiddler>>/></option>\\n</$list>\\n</$select>\\n\\\\end\\n\\n<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\n!! 主题\\n\\n; 日间模式所使用的主题\\n: <<theme-selector tiddler:\\\"$:/plugins/Gk0Wk/drawio/config/theme-light\\\" >>\\n\\n; 夜间模式所使用的主题\\n: <<theme-selector tiddler:\\\"$:/plugins/Gk0Wk/drawio/config/theme-dark\\\" >>\\n\\n> 不同的主题的样式可以参考[[官网文档|https://www.drawio.com/blog/diagram-editor-theme]]。\\n\\n</$list>\\n\\n<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\n!! Themes\\n\\n; Theme used for light mode\\n: <<theme-selector tiddler:\\\"$:/plugins/Gk0Wk/drawio/config/theme-light\\\" >>\\n\\n; Theme used for dark mode\\n: <<theme-selector tiddler:\\\"$:/plugins/Gk0Wk/drawio/config/theme-dark\\\" >>\\n\\n> Different themes can be found in the [[official documentation|https://www.drawio.com/blog/diagram-editor-theme]].\\n\\n</$list>\\n</$list>\\n\"},\"$:/plugins/Gk0Wk/drawio/icon\":{\"title\":\"$:/plugins/Gk0Wk/drawio/icon\",\"text\":\"{{$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon}}\\n\"},\"$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon\":{\"title\":\"$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon\",\"tags\":\"$:/tags/Image\",\"text\":\"<svg viewBox=\\\"-156 -86 205.81093 214.63753\\\" width=\\\"22pt\\\" height=\\\"22pt\\\">\\n  <g fill-rule=\\\"evenodd\\\">\\n    <path d=\\\"M 7.510919 104.83754 L 7.510919 123.63753 C 7.510919 126.39895 9.749495 128.63753 12.510919 128.63753 L 21.01092 128.63753 C 23.772343 128.63753 26.01092 126.39895 26.01092 123.63753 L 26.01092 104.83754 L 44.81093 104.83754 C 47.57235 104.83754 49.81093 102.59896 49.81093 99.83754 L 49.81093 91.83754 C 49.81093 89.07611 47.57235 86.83754 44.81093 86.83754 L 26.01092 86.83754 L 26.01092 67.63753 C 26.01092 64.87611 23.772343 62.63753 21.01092 62.63753 L 12.510919 62.63753 C 9.749495 62.63753 7.510919 64.87611 7.510919 67.63753 L 7.510919 86.83754 L -11.789074 86.83754 C -14.550497 86.83754 -16.789074 89.07611 -16.789074 91.83754 L -16.789074 99.83754 C -16.789074 102.59896 -14.550497 104.83754 -11.789074 104.83754 Z M -59.01476 -83.85373 L -59.01476 -83.85373 C -59.01476 -83.85373 -59.01476 -83.85373 -59.01476 -83.85373 C -66.667444 -88.27201 -76.45289 -85.65001 -80.87117 -77.99733 L -153.85373 48.412184 C -158.27201 56.064866 -155.65001 65.85031 -147.99733 70.26859 L -62.87887 119.41176 C -55.22619 123.83003 -45.44074 121.20803 -41.022464 113.55535 L 31.960102 -12.854164 C 31.960102 -12.854164 31.960102 -12.854164 31.960102 -12.854164 C 36.37838 -20.506846 33.756378 -30.292292 26.103696 -34.71057 L -59.01476 -83.85373 Z M -65.25693 .4979554 L -65.25693 .4979554 C -67.29688 -1.7634792 -67.587825 -5.513017 -65.74699 -8.701437 L -56.532335 -24.661687 C -54.31968 -28.494123 -49.86498 -30.064607 -46.582494 -28.169462 L -28.306324 -17.61771 C -25.023836 -15.722565 -24.156567 -11.079443 -26.369225 -7.247007 L -35.58388 8.713242 C -37.42618 11.904203 -40.82279 13.527054 -43.802935 12.887011 L -45.53852 41.13174 L -35.201383 47.09989 C -31.918895 48.995036 -31.051627 53.63816 -33.264284 57.470594 L -42.47894 73.43084 C -44.691597 77.26328 -49.14629 78.83376 -52.42878 76.93862 L -70.70495 66.38687 C -73.98744 64.49172 -74.85471 59.8486 -72.64205 56.016164 L -63.427394 40.055914 C -61.214736 36.22348 -56.76004 34.652994 -53.47755 36.54814 L -51.85793 37.48323 C -51.48697 30.840904 -50.63306 15.47325 -50.334974 9.449013 L -59.0156 4.437249 C -64.0837 7.707519 -76.96553 16.130853 -82.53247 19.773275 L -80.93599 20.695003 C -77.6535 22.590148 -76.78623 27.23327 -78.99889 31.065705 L -88.21355 47.025955 C -90.4262 50.85839 -94.8809 52.428875 -98.16339 50.53373 L -116.43956 39.98198 C -119.72205 38.086833 -120.58931 33.44371 -118.37666 29.611276 L -109.162 13.651026 C -106.94934 9.81859 -102.49465 8.248106 -99.21216 10.143251 L -88.85188 16.124764 L -65.25693 .4979554 L -65.25693 .4979554 Z\\\" />\\n  </g>\\n</svg>\\n\"},\"$:/plugins/Gk0Wk/drawio/new-drawio-diagram\":{\"title\":\"$:/plugins/Gk0Wk/drawio/new-drawio-diagram\",\"tags\":\"$:/tags/PageControls $:/tags/ViewToolbar\",\"hint\":\"<$text text={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建一个draw.io图表条目]else[Create a new draw.io diagram tiddler]] }}} />\",\"description\":\"<$text text={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建一个draw.io图表条目]else[Create a new draw.io diagram tiddler]] }}} />\",\"caption\":\"{{$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon}} <$text text={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建图表]else[new diagram]] }}} />\",\"text\":\"\\\\whitespace trim\\n\\n\\\\define createDiagram()\\n<$action-createtiddler $basetitle={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[图表]else[Diagram]] }}} type=\\\"application/vnd.drawio\\\" >\\n<$action-sendmessage $message=\\\"tm-edit-tiddler\\\" $param=<<createTiddler-title>>/>\\n</$action-createtiddler>\\n\\\\end\\n\\n\\\\define drawioButton()\\n\\\\whitespace trim\\n<$button tooltip={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建一个draw.io图表条目]else[Create a new draw.io diagram tiddler]] }}} aria-label={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建图表]else[new diagram]] }}} class=<<tv-config-toolbar-class>> actions=<<createDiagram>> >\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text={{{ [[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]search[zh]then[新建图表]else[new diagram]] }}} />\\n</span>\\n</$list>\\n</$button>\\n\\\\end\\n\\n<<drawioButton>>\\n\"},\"$:/plugins/Gk0Wk/drawio/readme\":{\"title\":\"$:/plugins/Gk0Wk/drawio/readme\",\"type\":\"text/vnd.tiddlywiki\",\"caption\":\"draw.io\",\"text\":\"<img src=\\\"https://www.drawio.com/assets/img/blog/feature-flag-gitflow-tags.png\\\" width=\\\"100%\\\" height=\\\"auto\\\" >\\n\\n<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\ndraw.io 是一个强大的在线图表编辑器，可以用来绘制流程图、组织结构图、UML图、网络图、平面图、电路图、数据库图、房屋平面图、地图等等。\\n\\n现在我将其集成到了 <$text text=\\\"TiddlyWiki\\\" /> 中，你可以在这里使用它。点击 {{$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon}} 按钮，就可以创建一个新的图表条目，该条目在非编辑模式下会显示其绘制的内容，而在编辑模式下则会进入 draw.io 的编辑界面。\\n\\n注意：编辑模式需要联网才能使用，因为 draw.io 是在线编辑器，初次加载需要一定的时间，所以请耐心等待。但是预览图片不需要联网，所以你可以在离线状态下查看图表，此时它和你其他的图片没有区别。\\n\\n你可以在插件的设置中修改编辑器在日间或夜间模式下的主题。\\n\\n在编辑器中，你可以导入和导出各种类型的图表文件。图标实际上将以 SVG+嵌入式 XML 的形式保存在 <$text text=\\\"TiddlyWiki\\\" /> 中，这样可以保证图表的可编辑性。你可以在编辑器中导出为各种格式的文件，也可以在 <$text text=\\\"TiddlyWiki\\\" /> 中导出为 SVG、PNG 等文件。\\n\\n你可以在这里查看 draw.io 的官方文档：https://www.drawio.com/\\n\\n快来试试吧！\\n\\n</$list>\\n\\n<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\ndraw.io is a powerful online diagram editor that can be used to draw flowcharts, organizational charts, UML diagrams, network diagrams, floor plans, circuit diagrams, database diagrams, house floor plans, maps, etc.\\n\\nNow I have integrated it into <$text text=\\\"TiddlyWiki\\\" />, you can use it here. Click the {{$:/plugins/Gk0Wk/drawio/new-drawio-diagram-icon}} button to create a new diagram tiddler, which will display its drawing content in non-editing mode, and will enter the draw.io editing interface in editing mode.\\n\\nNote: The editing mode requires networking, because draw.io is an online editor, which takes some time to load for the first time, so please be patient. But the preview image does not require networking, so you can view the chart in offline mode, and it is no different from your other images.\\n\\nYou can modify the theme of the editor in the settings of the plugin in day or night mode.\\n\\nIn the editor, you can import and export various types of chart files. The icon is actually saved in the form of SVG+embedded XML in <$text text=\\\"TiddlyWiki\\\" />, which ensures the editability of the chart. You can export to various formats of files in the editor, or export to SVG, PNG and other files in <$text text=\\\"TiddlyWiki\\\" />.\\n\\nYou can view the official documentation of draw.io here: https://www.drawio.com/\\n\\nCome and try it!\\n\\n</$list>\\n</$list>\\n\"},\"$:/plugins/Gk0Wk/drawio/edit-drawio.js\":{\"title\":\"$:/plugins/Gk0Wk/drawio/edit-drawio.js\",\"module-type\":\"widget\",\"type\":\"application/javascript\",\"Modern.TiddlyDev#Origin\":\"edit-drawio.ts\",\"text\":\"\\\"use strict\\\";var drawioUnmountCheckTimer,editTextWidgetFactory=require(\\\"$:/core/modules/editor/factory.js\\\")[\\\"editTextWidgetFactory\\\"],SimpleEngine=require(\\\"$:/core/modules/editor/engines/simple.js\\\")[\\\"SimpleEngine\\\"],decode=require(\\\"$:/plugins/Gk0Wk/drawio/base64.min.js\\\")[\\\"decode\\\"],checkIfDarkMode=($tw.utils.registerFileType(\\\"application/x-drawio\\\",\\\"utf8\\\",\\\".drawio\\\",{flags:[\\\"image\\\"]}),$tw.utils.registerFileType(\\\"application/vnd.drawio\\\",\\\"utf8\\\",\\\".drawio\\\",{flags:[\\\"image\\\"]}),()=>{var e;return\\\"dark\\\"===(null==(e=null==(e=$tw.wiki.getTiddler($tw.wiki.getTiddlerText(\\\"$:/palette\\\")))?void 0:e.fields)?void 0:e[\\\"color-scheme\\\"])}),drawioEditorInstance=new Set,registerInstance=e=>{$tw.browser&&void 0===drawioUnmountCheckTimer&&(drawioEditorInstance.add(e),drawioUnmountCheckTimer=setInterval(()=>{var e=[];for(const t of drawioEditorInstance)void 0!==t.iframeNode&&document.contains(t.iframeNode)||e.push(t);for(const i of e)drawioEditorInstance[\\\"delete\\\"](i);drawioEditorInstance.size<1&&(drawioUnmountCheckTimer=void 0,clearInterval(drawioUnmountCheckTimer))},1e3))},DrawIOEditor=class{constructor({widget:d,value:e,parentNode:t,nextSibling:i}){if($tw.browser){this.iframeNode=$tw.utils.domMaker(\\\"iframe\\\",{document:d.document,\\\"class\\\":\\\"gk0wk-drawio-iframe\\\",attributes:{frameborder:\\\"0\\\"},style:{margin:\\\"0\\\",border:\\\"none\\\",width:\\\"100%\\\",minHeight:\\\"700px\\\",maxHeight:\\\"90vh\\\",height:\\\"100%\\\"}}),t.insertBefore(this.iframeNode,i),this.xml=e;let s=!1;const o=({data:e,source:t})=>{var i;if(null!==(null==(i=this.iframeNode)?void 0:i.contentWindow)&&t===this.iframeNode.contentWindow){const{event:n,...a}=JSON.parse(e);switch(n){case\\\"init\\\":if(s)return;s=!0,this.iframeNode.contentWindow.postMessage(JSON.stringify({action:\\\"load\\\",xml:this.xml,autosave:1}),\\\"*\\\");break;case\\\"configure\\\":this.iframeNode.contentWindow.postMessage(JSON.stringify({action:\\\"configure\\\",config:{compressXml:!0,enableCssDarkMode:!1}}),\\\"*\\\");break;case\\\"load\\\":case\\\"save\\\":case\\\"autosave\\\":this.iframeNode.contentWindow.postMessage(JSON.stringify({action:\\\"export\\\",format:\\\"xmlsvg\\\",embedImages:!0,keepTheme:!0,twEditor:!0}),\\\"*\\\");break;case\\\"openLink\\\":var{href:r,target:o}=a;window.open(r,o);break;case\\\"export\\\":var{message:r,data:o}=a;if(o&&r.twEditor){r=decode(o.split(\\\",\\\",2)[1]);if(r===this.xml)return;this.xml=r,d.saveChanges(r)}}}};var r=$tw.wiki.getTiddlerText(checkIfDarkMode()?\\\"$:/plugins/Gk0Wk/drawio/config/theme-dark\\\":\\\"$:/plugins/Gk0Wk/drawio/config/theme-light\\\",\\\"\\\")||\\\"Kennedy\\\";window.addEventListener(\\\"message\\\",o),this.iframeNode.setAttribute(\\\"src\\\",`https://embed.diagrams.net/?embed=1&ui=${r}&spin=1&libraries=1&noExitBtn=1&saveAndExit=0&noSaveBtn=1&proto=json&protocol=json&configure=1`),this.unmount=()=>{window.removeEventListener(\\\"message\\\",o)},registerInstance(this)}else t.insertBefore($tw.utils.domMaker(\\\"div\\\",{document:d.document,\\\"class\\\":\\\"gk0wk-drawio-preview\\\",style:{margin:\\\"0\\\",border:\\\"none\\\",width:\\\"100%\\\",height:\\\"100%\\\"},innerHTML:e}),i),this.xml=\\\"\\\",this.unmount=()=>null}loadXml(e){var t,i;e!==this.xml&&null!=(i=null==(t=null==(t=this.iframeNode)?void 0:t.contentWindow)?void 0:t.postMessage)&&i.call(t,JSON.stringify({action:\\\"load\\\",xml:e,autosave:1}),\\\"*\\\")}resize(){}fixHeight(){this.resize()}focus(){var e,t;null!=(t=null==(e=this.iframeNode)?void 0:e.focus)&&t.call(e)}createTextOperation(){return{text:\\\"\\\",selection:\\\"\\\",selStart:0,selEnd:0,cutStart:null,cutEnd:null,replacement:null,newSelStart:null,newSelEnd:null}}executeTextOperation(){return this.xml}updateDomNodeText(e){this.loadXml(e)}setText(e,t){this.loadXml(e)}},engine=$tw.browser?DrawIOEditor:SimpleEngine;exports[\\\"edit-drawio\\\"]=editTextWidgetFactory(engine,engine);\"}}}","Modern.TiddlyDev#SHA256-Hashed":"b9460c3654342f7c41147a0d0f0221382174bbbcc1ba6cda3edf61b565904eaf"}