{"version":"0.0.2","type":"application/json","title":"$:/plugins/Gk0Wk/sidebar-resizer","plugin-type":"plugin","name":"Sidebar Resizer","list":"readme","description":"Use cursor to resize the width of sidebar.","author":"Gk0Wk","source":"https://github.com/tiddly-gittly/TiddlyWiki-Chinese-Tutorial/tree/master/plugins/Gk0Wk/sidebar-resizer","dependents":"","text":"{\"tiddlers\":{\"$:/plugins/Gk0Wk/sidebar-resizer/hook.js\":{\"title\":\"$:/plugins/Gk0Wk/sidebar-resizer/hook.js\",\"text\":\"(function() {\\n    \\\"use strict\\\";\\n    if (typeof window !== 'undefined' && window.document) {\\n        var sidebarResizerNode = null;\\n        var canResize = false;\\n        $tw.hooks.addHook('th-page-refreshed', function() {\\n            if (sidebarResizerNode && sidebarResizerNode.ownerDocument.contains(sidebarResizerNode)) return;\\n            var body = document.querySelector('body');\\n            if (!body) return;\\n            sidebarResizerNode = document.querySelector('#gk0wk-sidebar-resize-area');\\n            if (!sidebarResizerNode) return;\\n            canResize = false;\\n\\n            function hideSideBar() {\\n                $tw.wiki.setText('$:/state/sidebar', null, null, 'no');\\n                canResize = false;\\n            }\\n\\n            function drag(event) {\\n                if (!canResize) return;\\n                var widthPercent = 100 - (event.clientX / window.innerWidth) * 100;\\n                if (widthPercent > 80) return;\\n                if ((window.innerWidth - event.clientX) < 100) {\\n                    $tw.wiki.setText('$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth', null, null, (30000 / window.innerWidth) + 'vw');\\n                    hideSideBar();\\n                    return;\\n                }\\n                $tw.wiki.setText('$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth', null, null, widthPercent + 'vw');\\n                event.preventDefault();\\n                event.stopPropagation();\\n            }\\n            body.addEventListener('dblclick', hideSideBar);\\n            if (window.PointerEvent) {\\n                function dragBegin(event) {\\n                    canResize = true;\\n                    body.setPointerCapture(event.pointerId);\\n                }\\n\\n                function dragEnd(event) {\\n                    canResize = false;\\n                    body.releasePointerCapture(event.pointerId);\\n                }\\n                sidebarResizerNode.addEventListener('pointerdown', dragBegin);\\n                body.addEventListener('pointerup', dragEnd);\\n                body.addEventListener('blur', dragEnd);\\n                body.addEventListener('pointermove', drag, true);\\n            } else {\\n                function dragBegin() {\\n                    canResize = true;\\n                }\\n\\n                function dragEnd() {\\n                    canResize = false;\\n                }\\n                sidebarResizerNode.addEventListener('mousedown', dragBegin);\\n                body.addEventListener('mouseup', dragEnd);\\n                body.addEventListener('blur', dragEnd);\\n                body.addEventListener('mousemove', drag, true);\\n                sidebarResizerNode.addEventListener('touchstart', dragBegin);\\n                body.addEventListener('touchcancel', dragEnd);\\n                body.addEventListener('touchend', dragEnd);\\n                body.addEventListener('touchmove', drag, true);\\n            }\\n        });\\n    }\\n})();\\n\",\"type\":\"application/javascript\",\"module-type\":\"startup\"},\"$:/plugins/Gk0Wk/sidebar-resizer/readme\":{\"title\":\"$:/plugins/Gk0Wk/sidebar-resizer/readme\",\"text\":\"\\\\define lingo-base() $:/language/ThemeTweaks/\\n\\n<$list filter=\\\"[[$:/language]get[text]removeprefix[$:/languages/]else[en-GB]]\\\" variable=\\\"lang\\\">\\n<$list filter=\\\"[<lang>search[zh]]\\\">\\n\\n会在侧边栏的左侧边缘添加一个可拖动的边框，当鼠标移动到左侧边缘时会看到这个边框。拖动这个边框可以改变侧边栏的宽度，拖动到靠近窗口右侧边缘时就会自动收起侧边栏。\\n\\n原理是更改[[$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth]]的值。\\n\\n注意：首先请将 <$link to=\\\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\\\"><<lingo Options/SidebarLayout>></$link> 调整为`fluid-fixed`，本插件才可生效。\\n\\n<$button set=\\\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\\\" setTo=\\\"fluid-fixed\\\">点击设置<<lingo Options/SidebarLayout>></$button>\\n\\n</$list>\\n\\n<$list filter=\\\"[<lang>!search[zh]]\\\">\\n\\nA draggable border is added to the left edge of the sidebar, which will be visible when the mouse is moved to the left edge. Dragging this border will change the width of the sidebar, and it will automatically close the sidebar when dragged near the right edge of the window.\\n\\nThe principle is to change the value of [[$:/themes/tiddlywiki/vanilla/metrics/sidebarwidth]].\\n\\nNote: First, please adjust <$link to=\\\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\\\"><<lingo Options/SidebarLayout>></$link> to `fluid-fixed` for this plugin to take effect.\\n\\n<$button set=\\\"$:/themes/tiddlywiki/vanilla/options/sidebarlayout\\\" setTo=\\\"fluid-fixed\\\">Click to adjust<<lingo Options/SidebarLayout>></$button>\\n\\n</$list>\\n</$list>\\n\"},\"$:/plugins/Gk0Wk/sidebar-resizer/resizer\":{\"title\":\"$:/plugins/Gk0Wk/sidebar-resizer/resizer\",\"tags\":\"$:/tags/SideBarSegment\",\"text\":\"<div id=\\\"gk0wk-sidebar-resize-area\\\"></div>\\n\"},\"$:/plugins/Gk0Wk/sidebar-resizer/style.css\":{\"title\":\"$:/plugins/Gk0Wk/sidebar-resizer/style.css\",\"text\":\"<$reveal state=\\\"$:/state/sidebar\\\" type=\\\"match\\\" text=\\\"no\\\">\\n.tc-sidebar-scrollable {\\n\\tdisplay: none;\\n}\\n</$reveal>\\n\\ndiv#gk0wk-sidebar-resize-area {\\n\\theight: 100vh;\\n\\twidth: 10px;\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: -5px;\\n\\tcursor: ew-resize;\\n\\ttransition: all {{$:/config/AnimationDuration}}ms;\\n}\\n\\ndiv#gk0wk-sidebar-resize-area:hover {\\n\\tbackground: <<colour primary>>;\\n}\\n\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/vnd.tiddlywiki\"}}}"}