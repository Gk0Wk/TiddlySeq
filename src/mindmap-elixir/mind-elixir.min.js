/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/mind-elixir@3.2.6/dist/MindElixir.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;line-height:1.2em;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:20px 65px}.map-container me-main>me-wrapper>me-parent{margin:var(--gap);padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px var(--gap)}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px var(--gap)}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding);line-height:1.2em}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>div,.map-container me-tpc>span,.map-container me-tpc>img{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#aaa;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}(),function(e){var t,n,i,o,s,r,l='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',a=(a=document.getElementsByTagName("script"))[a.length-1].getAttribute("data-injectcss");if(a&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function c(){s||(s=!0,i())}t=function(){var e,t,n,i;(i=document.createElement("div")).innerHTML=l,l=null,(n=i.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",e=n,(t=document.body).firstChild?(i=e,(n=t.firstChild).parentNode.insertBefore(i,n)):t.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,o=e.document,s=!1,(r=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(r,50)}c()})(),o.onreadystatechange=function(){"complete"==o.readyState&&(o.onreadystatechange=null,c())})}(window);const S=0,H=1,K=2,M=30,L=8,Le={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},Me={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function ee(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const Xe=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),te=function(e,t){if(t.id===e)return t;if(t.children&&t.children.length){for(let n=0;n<t.children.length;n++){const i=te(e,t.children[n]);if(i)return i}return null}return null},T=(e,t)=>{if(e.parent=t,e.children)for(let t=0;t<e.children.length;t++)T(e.children[t],e)};function Te(e){if(e.id=U(),e.children)for(let t=0;t<e.children.length;t++)Te(e.children[t])}const Ke=(e,t)=>{let n=Date.now();return function(...i){Date.now()-n>=t&&(e(...i),n=Date.now())}};function $e(e,t,n,i){const o=i-t,s=e-n;let r=Math.atan(Math.abs(o)/Math.abs(s))/3.14*180;s<0&&o>0&&(r=180-r),s<0&&o<0&&(r=180+r),s>0&&o<0&&(r=360-r);const l=r+30,a=r-30;return{x1:n+15*Math.cos(Math.PI*l/180),y1:i-15*Math.sin(Math.PI*l/180),x2:n+15*Math.cos(Math.PI*a/180),y2:i-15*Math.sin(Math.PI*a/180)}}function U(){return((new Date).getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const Ue=function(){const e=U();return{topic:this.newTopicName,id:e}};function Ge(e,t){let n=!0;for(;t.parent;){if(t.parent===e){n=!1;break}t=t.parent}return n}const P=e=>{var t;const n=null==(t=e.parent)?void 0:t.children,i=n.indexOf(e);return{siblings:n,index:i}};function Je(e){const{siblings:t,index:n}=P(e),i=t[n];0===n?(t[n]=t[t.length-1],t[t.length-1]=i):(t[n]=t[n-1],t[n-1]=i)}function Qe(e){const{siblings:t,index:n}=P(e),i=t[n];n===t.length-1?(t[n]=t[0],t[0]=i):(t[n]=t[n+1],t[n+1]=i)}function oe(e){const{siblings:t,index:n}=P(e);return t.splice(n,1),t.length}function Ze(e,t){const{siblings:n,index:i}=P(e);n.splice(i+1,0,t)}function et(e,t){const{siblings:n,index:i}=P(e);n.splice(i,0,t)}function tt(e,t){const{siblings:n,index:i}=P(e);n[i]=t,t.children=[e]}function nt(e,t){oe(e),t.children?t.children.push(e):t.children=[e]}function it(e,t){oe(e);const{siblings:n,index:i}=P(t);n.splice(i,0,e)}function ot(e,t){oe(e);const{siblings:n,index:i}=P(t);n.splice(i+1,0,e)}function De(e){return JSON.parse(JSON.stringify(e,((e,t)=>{if("parent"!==e)return t})))}const W=(e,t)=>{let n=0,i=0;for(;t&&t!==e;)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{offsetLeft:n,offsetTop:i}},N=(e,t)=>{for(const n in t)e.setAttribute(n,t[n])},D={moved:!1,mousedown:!1,lastX:0,lastY:0,onMove(e,t){if(this.mousedown){if(this.moved=!0,!this.lastX)return this.lastX=e.pageX,void(this.lastY=e.pageY);const n=this.lastX-e.pageX,i=this.lastY-e.pageY;t.scrollTo(t.scrollLeft+n,t.scrollTop+i),this.lastX=e.pageX,this.lastY=e.pageY}},clear(){this.moved=!1,this.mousedown=!1,this.lastX=0,this.lastY=0}},fe=e=>"ME-TPC"===e.tagName;function st(e){e.map.addEventListener("click",(t=>{if(D.moved)return void D.clear();e.unselectNode(),e.unselectNodes(),e.unselectSummary(),e.unselectLink();const n=t.target;if("ME-EPD"===n.tagName)e.expandNode(n.previousSibling);else{if(!e.editable)return;fe(n)?e.selectNode(n,!1,t):"text"===n.tagName?"custom-link"===n.dataset.type?e.selectLink(n.parentElement):e.selectSummary(n.parentElement):"circle"===n.className||e.hideLinkController&&e.hideLinkController()}})),e.map.addEventListener("dblclick",(t=>{if(t.preventDefault(),!e.editable)return;const n=t.target;fe(n)?e.beginEdit(n):"text"===n.tagName&&("custom-link"===n.dataset.type?e.editCutsomLinkLabel(n.parentElement):e.editSummary(n.parentElement))})),e.map.addEventListener("mousemove",(t=>{"true"!==t.target.contentEditable&&D.onMove(t,e.container)})),e.map.addEventListener("mousedown",(e=>{2===e.button&&"true"!==e.target.contentEditable&&(D.moved=!1,D.mousedown=!0)})),e.map.addEventListener("mouseleave",(e=>{console.log(e.button),2===e.button&&D.clear()})),e.map.addEventListener("mouseup",(e=>{2===e.button&&D.clear()})),e.map.addEventListener("contextmenu",(e=>{e.preventDefault()}))}const rt={create:()=>({handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array){const n=this.handlers[e];for(let e=0;e<n.length;e++)n[e](...t)}},removeListener:function(e,t){if(!this.handlers[e])return;const n=this.handlers[e];if(t){if(n.length)for(let i=0;i<n.length;i++)n[i]===t&&this.handlers[e].splice(i,1)}else n.length=0}})},ne=document,lt=function(){console.time("layout"),this.nodes.innerHTML="";const e=this.createTopic(this.nodeData);de(e,this.nodeData),e.draggable=!1;const t=ne.createElement("me-root");t.appendChild(e);const n=this.nodeData.children||[];if(2===this.direction){let e=0,t=0;n.map((n=>{0===n.direction?e+=1:1===n.direction?t+=1:e<=t?(n.direction=0,e+=1):(n.direction=1,t+=1)}))}ct(this,n,t),console.timeEnd("layout")},ct=function(e,t,n){const i=ne.createElement("me-main");i.className="lhs";const o=ne.createElement("me-main");o.className="rhs";for(let n=0;n<t.length;n++){const s=t[n],{grp:r}=e.createWrapper(s);2===e.direction?0===s.direction?i.appendChild(r):o.appendChild(r):0===e.direction?i.appendChild(r):o.appendChild(r)}e.nodes.appendChild(i),e.nodes.appendChild(n),e.nodes.appendChild(o),e.nodes.appendChild(e.lines)},at=function(e,t){const n=ne.createElement("me-children");for(let i=0;i<t.length;i++){const o=t[i],{grp:s}=e.createWrapper(o);n.appendChild(s)}return n},k=document,E=(e,t)=>{const n=(t?t.mindElixirBox:k).querySelector(`[data-nodeid=me${e}]`);if(!n)throw new Error(`FindEle: Node ${e} not found, maybe it's collapsed.`);return n},de=function(e,t){if(e.innerHTML="",t.style&&(e.style.color=t.style.color||"",e.style.background=t.style.background||"",e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal"),t.branchColor&&(e.style.borderColor=t.branchColor),t.image){const n=t.image;if(n.url&&n.width&&n.height){const t=k.createElement("img");t.src=n.url,t.style.width=n.width+"px",t.style.height=n.height+"px",e.appendChild(t),e.image=t}else console.warn("image url/width/height are required")}else e.image&&(e.image=void 0);{const n=k.createElement("span");n.className="text",n.textContent=t.topic,e.appendChild(n),e.text=n}if(t.hyperLink){const n=k.createElement("a");n.className="hyper-link",n.target="_blank",n.innerText="🔗",n.href=t.hyperLink,e.appendChild(n),e.linkContainer=n}else e.linkContainer&&(e.linkContainer=void 0);if(t.icons&&t.icons.length){const n=k.createElement("span");n.className="icons",n.innerHTML=t.icons.map((e=>`<span>${ee(e)}</span>`)).join(""),e.appendChild(n),e.icons=n}else e.icons&&(e.icons=void 0);if(t.tags&&t.tags.length){const n=k.createElement("div");n.className="tags",n.innerHTML=t.tags.map((e=>`<span>${ee(e)}</span>`)).join(""),e.appendChild(n),e.tags=n}else e.tags&&(e.tags=void 0)},dt=function(e,t){const n=k.createElement("me-wrapper"),{p:i,tpc:o}=this.createParent(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0){const t=se(e.expanded);if(i.appendChild(t),!1!==e.expanded){const t=at(this,e.children);n.appendChild(t)}}return{grp:n,top:i,tpc:o}},ht=function(e){const t=k.createElement("me-parent"),n=this.createTopic(e);return de(n,e),t.appendChild(n),{p:t,tpc:n}},ut=function(e){const t=k.createElement("me-children");return t.append(...e),t},ft=function(e){const t=k.createElement("me-tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function Oe(e){const t=k.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const pt=function(e){if(console.time("editTopic"),!e)return;const t=k.createElement("div"),n=e.text.textContent;e.appendChild(t),t.id="input-box",t.textContent=n,t.contentEditable="true",t.spellcheck=!1,t.style.cssText=`min-width:${e.offsetWidth-8}px;`,0===this.direction&&(t.style.right="0"),t.focus(),Oe(t),this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",(e=>{e.stopPropagation();const n=e.key;if("Enter"===n||"Tab"===n){if(e.shiftKey)return;e.preventDefault(),null==t||t.blur(),this.map.focus()}})),t.addEventListener("blur",(()=>{var i;if(!t)return;const o=e.nodeObj,s=(null==(i=t.textContent)?void 0:i.trim())||"";console.log(s),o.topic=""===s?n:s,t.remove(),s!==n&&(e.text.textContent=o.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:o,origin:n}))})),console.timeEnd("editTopic")},se=function(e){const t=k.createElement("me-epd");return t.expanded=!1!==e,t.className=!1!==e?"minus":"",t},z=document,R="http://www.w3.org/2000/svg",mt=function(e,t){const n=z.createElementNS(R,"path");return n.setAttribute("d",e),n.setAttribute("stroke",t||"#666"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","3"),n},X=function(e){const t=z.createElementNS(R,"svg");return t.setAttribute("class",e),t.setAttribute("overflow","visible"),t},pe=function(){const e=z.createElementNS(R,"line");return e.setAttribute("stroke","#bbb"),e.setAttribute("fill","none"),e.setAttribute("stroke-width","2"),e},gt=function(e,t){const n=z.createElementNS(R,"path");return n.setAttribute("d",e),n.setAttribute("stroke",t||"#555"),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","square"),n.setAttribute("stroke-width","2"),n},vt=function(e,t){const n={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},i=z.createElementNS(R,"g"),o=z.createElementNS(R,"path"),s=z.createElementNS(R,"path");return N(s,{d:t,...n}),N(o,{d:e,...n,"stroke-dasharray":"8,2"}),i.appendChild(o),i.appendChild(s),i},Ae=function(e,t,n){if(console.time("editSummary"),!t)return;const i=document.createElement("div");e.nodes.appendChild(i);const o=t.innerHTML;i.id="input-box",i.textContent=o,i.contentEditable="true",i.spellcheck=!1;const s=t.getAttribute("x")+"px",r=t.getAttribute("y")+"px";i.style.cssText=`min-width:92px;position:absolute;left:${s};top:${r};`;const l=t.getAttribute("text-anchor");i.style.cssText+="end"===l?"transform: translate(-100%, -100%);":"middle"===l?"transform: translate(-50%, -100%);":"transform: translate(0, -100%);",i.focus(),Oe(i),i.addEventListener("keydown",(t=>{t.stopPropagation();const n=t.key;if("Enter"===n||"Tab"===n){if(t.shiftKey)return;t.preventDefault(),i.blur(),e.map.focus()}})),i.addEventListener("blur",(()=>{i&&n(i)})),console.timeEnd("editSummary")};let Pe=He;const bt=function(e){console.time("linkDiv");const t=this.map.querySelector("me-root");this.nodes.style.top=1e4-this.nodes.offsetHeight/2+"px",this.nodes.style.left=1e4-t.offsetLeft-t.offsetWidth/2+"px";const n=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="",Pe=2===this.subLinkStyle?wt:He;for(let i=0;i<n.length;i++){const o=n[i],s=o.querySelector("me-tpc"),r=o.firstChild,l=o.parentNode.className;let a=t.offsetLeft+t.offsetWidth/2;const c=t.offsetTop+t.offsetHeight/2;let d;const h=this.theme.palette,p=s.nodeObj.branchColor||h[i%h.length],{offsetLeft:m,offsetTop:u}=W(this.nodes,r);d="lhs"===l?m+r.offsetWidth:m;const f=u+r.offsetHeight/2;let g="";if(2===this.mainLinkStyle)2===this.direction&&("lhs"===l?a-=t.offsetWidth/6:a+=t.offsetWidth/6),g=yt({x1:a,y1:c,x2:d,y2:f});else{const e=.25*(1-Math.abs(f-o.parentElement.offsetTop-o.parentElement.offsetHeight/2)/o.parentElement.offsetHeight)*(t.offsetWidth/2);a="lhs"===l?a-t.offsetWidth/10-e:a+t.offsetWidth/10+e,g=xt({x1:a,y1:c,x2:d,y2:f})}this.lines.appendChild(mt(g,p));const v=o.children[0].children[1];if(v&&(v.style.top=(v.parentNode.offsetHeight-v.offsetHeight)/2+"px","lhs"===l?v.style.left="-10px":v.style.right="-10px"),(!e||e===o)&&o.childElementCount){const e=X("subLines"),t=o.lastChild;"svg"===t.tagName&&t.remove(),o.appendChild(e);const n=o.firstChild,i=o.children[1].children,s=je(i,n,l,!0);e.appendChild(gt(s,p))}}this.renderCustomLink(),this.renderSummary(),console.timeEnd("linkDiv")},je=function(e,t,n,i){let o="";const s=t.offsetTop,r=t.offsetLeft,l=t.offsetWidth,a=t.offsetHeight;for(let t=0;t<e.length;t++){const c=e[t],d=c.firstChild,h=d.offsetTop,p=d.offsetLeft,m=d.offsetWidth,u=d.offsetHeight;o+=Pe({pT:s,pL:r,pW:l,pH:a,cT:h,cL:p,cW:m,cH:u,direction:n,isFirst:i});const f=d.children[1];if(!f)continue;if(f.style.bottom=-f.offsetHeight/2+"px","lhs"===n?f.style.left="10px":"rhs"===n&&(f.style.right="10px"),!f.expanded)continue;const g=c.children[1].children;g.length>0&&(o+=je(g,d,n))}return o};function yt({x1:e,y1:t,x2:n,y2:i}){return`M ${e} ${t} V ${i>t?i-20:i+20} C ${e} ${i} ${e} ${i} ${n>e?e+20:e-20} ${i} H ${n}`}function xt({x1:e,y1:t,x2:n,y2:i}){return`M ${e} ${t} Q ${e} ${i} ${n} ${i}`}function wt({pT:e,pL:t,pW:n,pH:i,cT:o,cL:s,cW:r,cH:l,direction:a,isFirst:c}){let d;d=c?e+i/2:e+i;const h=o+l;let p=0,m=0,u=0;return"lhs"===a?(p=t+M,m=s,u=s+r):"rhs"===a&&(p=t+n-M,m=s+r,u=s),h<d+50&&h>d-50?`M ${p} ${d} H ${u} V ${h} H ${m}`:h>=d?`M ${p} ${d} H ${u} V ${h-8} A 8 8 0 0 ${p>m?1:0} ${p>m?u-8:u+8} ${h} H ${m}`:`M ${p} ${d} H ${u} V ${h+8} A 8 8 0 0 ${p>m?0:1} ${p>m?u-8:u+8} ${h} H ${m}`}function He({pT:e,pL:t,pW:n,pH:i,cT:o,cL:s,cW:r,cH:l,direction:a,isFirst:c}){let d=0,h=0;d=c?e+i/2:e+i;const p=o+l;let m=0,u=0,f=0;const g=Math.min(Math.abs(d-p)/800,1.2)*M;return"lhs"===a?(f=t,m=f+M,u=f-M,h=s+M,`M ${m} ${d} C ${f} ${d} ${f+g} ${p} ${u} ${p} H ${h}`):(f=t+n,m=f-M,u=f+M,h=s+r-M,`M ${m} ${d} C ${f} ${d} ${f-g} ${p} ${u} ${p} H ${h}`)}const me={addChild:"插入子节点",addParent:"插入父节点",addSibling:"插入同级节点",removeNode:"删除节点",focus:"专注",cancelFocus:"取消专注",moveUp:"上移",moveDown:"下移",link:"连接",clickTips:"请点击目标节点",summary:"摘要"},ge={cn:me,zh_CN:me,zh_TW:{addChild:"插入子節點",addParent:"插入父節點",addSibling:"插入同級節點",removeNode:"刪除節點",focus:"專注",cancelFocus:"取消專注",moveUp:"上移",moveDown:"下移",link:"連接",clickTips:"請點擊目標節點",summary:"摘要"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"Добавить дочерний элемент",addParent:"Добавить родительский элемент",addSibling:"Добавить на этом уровне",removeNode:"Удалить узел",focus:"Режим фокусировки",cancelFocus:"Отменить режим фокусировки",moveUp:"Поднять выше",moveDown:"Опустить ниже",link:"Ссылка",clickTips:"Пожалуйста, нажмите на целевой узел",summary:"Описание"},ja:{addChild:"子ノードを追加する",addParent:"親ノードを追加します",addSibling:"兄弟ノードを追加する",removeNode:"ノードを削除",focus:"集中",cancelFocus:"集中解除",moveUp:"上へ移動",moveDown:"下へ移動",link:"コネクト",clickTips:"ターゲットノードをクリックしてください",summary:"概要"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Et(e,t){const n=(e,t,n)=>{const i=document.createElement("li");return i.id=e,i.innerHTML=`<span>${ee(t)}</span><span>${ee(n)}</span>`,i},i=ge[e.locale]?e.locale:"en",o=ge[i],s=n("cm-add_child",o.addChild,"tab"),r=n("cm-add_parent",o.addParent,""),l=n("cm-add_sibling",o.addSibling,"enter"),a=n("cm-remove_child",o.removeNode,"delete"),c=n("cm-fucus",o.focus,""),d=n("cm-unfucus",o.cancelFocus,""),h=n("cm-up",o.moveUp,"PgUp"),p=n("cm-down",o.moveDown,"Pgdn"),m=n("cm-down",o.link,""),u=n("cm-down",o.summary,""),f=document.createElement("ul");if(f.className="menu-list",f.appendChild(s),f.appendChild(r),f.appendChild(l),f.appendChild(a),(!t||t.focus)&&(f.appendChild(c),f.appendChild(d)),f.appendChild(h),f.appendChild(p),f.appendChild(u),(!t||t.link)&&f.appendChild(m),t&&t.extend)for(let e=0;e<t.extend.length;e++){const i=t.extend[e],o=n(i.name,i.name,i.key||"");f.appendChild(o),o.onclick=e=>{i.onclick(e)}}const g=document.createElement("div");g.className="context-menu",g.appendChild(f),g.hidden=!0,e.container.append(g);let v=!0;e.container.oncontextmenu=function(t){if(t.preventDefault(),!e.editable)return;const n=t.target;if("ME-TPC"===n.tagName){v="ME-ROOT"===n.parentElement.tagName,v?(c.className="disabled",h.className="disabled",p.className="disabled",r.className="disabled",l.className="disabled",a.className="disabled"):(c.className="",h.className="",p.className="",r.className="",l.className="",a.className=""),e.currentNodes||e.selectNode(n),g.hidden=!1;const i=f.offsetHeight,o=f.offsetWidth;i+t.clientY>window.innerHeight?(f.style.top="",f.style.bottom="0px"):(f.style.bottom="",f.style.top=t.clientY+15+"px"),o+t.clientX>window.innerWidth?(f.style.left="",f.style.right="0px"):(f.style.right="",f.style.left=t.clientX+10+"px")}},g.onclick=e=>{e.target===g&&(g.hidden=!0)},s.onclick=()=>{e.addChild(),g.hidden=!0},r.onclick=()=>{e.insertParent(),g.hidden=!0},l.onclick=()=>{v||(e.insertSibling(),g.hidden=!0)},a.onclick=()=>{v||(e.removeNode(),g.hidden=!0)},c.onclick=()=>{v||(e.focusNode(e.currentNode),g.hidden=!0)},d.onclick=()=>{e.cancelFocus(),g.hidden=!0},h.onclick=()=>{v||(e.moveUpNode(),g.hidden=!0)},p.onclick=()=>{v||(e.moveDownNode(),g.hidden=!0)},m.onclick=()=>{g.hidden=!0;const t=e.currentNode,n=(e=>{const t=document.createElement("div");return t.innerText=e,t.className="tips",t})(o.clickTips);e.container.appendChild(n),e.map.addEventListener("click",(i=>{i.preventDefault(),n.remove();const o=i.target;"ME-PARENT"===o.parentElement.tagName||"ME-ROOT"===o.parentElement.tagName?e.createLink(t,o):console.log("link cancel")}),{once:!0})},u.onclick=()=>{g.hidden=!0,e.createSummary(),e.unselectNodes()}}const Nt=e=>{const t=e.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},Ct=e=>{const t=e.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");e.selectNode(t[Math.ceil(t.length/2)-1])},ve=e=>{e.selectNode(e.map.querySelector("me-root>me-tpc"))};function _t(e){const t={13:t=>{t.shiftKey?e.insertBefore():e.insertSibling()},9:()=>{e.addChild()},112:()=>{e.toCenter()},113:()=>{e.beginEdit()},38:t=>{if(t.altKey)e.moveUpNode();else{if(t.metaKey||t.ctrlKey)return e.initSide();e.selectPrevSibling()}},40:t=>{t.altKey?e.moveDownNode():e.selectNextSibling()},37:t=>{var n;if(t.metaKey||t.ctrlKey)return e.initLeft();if(!e.currentNode)return;const i=e.currentNode.nodeObj,o=e.currentNode.offsetParent.offsetParent.parentElement;e.currentNode.nodeObj.root?Nt(e):"rhs"===o.className?null!=(n=i.parent)&&n.root?ve(e):e.selectParent():"lhs"===o.className&&e.selectFirstChild()},39:t=>{var n;if(t.metaKey||t.ctrlKey)return e.initRight();if(!e.currentNode)return;const i=e.currentNode.nodeObj,o=e.currentNode.offsetParent.offsetParent.parentElement;i.root?Ct(e):"lhs"===o.className?null!=(n=i.parent)&&n.root?ve(e):e.selectParent():"rhs"===o.className&&e.selectFirstChild()},33(){e.moveUpNode()},34(){e.moveDownNode()},67:t=>{(t.metaKey||t.ctrlKey)&&(e.waitCopy=e.currentNode)},86:t=>{!e.waitCopy||!e.currentNode||(t.metaKey||t.ctrlKey)&&(e.copyNode(e.waitCopy,e.currentNode),e.waitCopy=null)},187:t=>{if(t.metaKey||t.ctrlKey){if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=.2)}},189:t=>{if(t.metaKey||t.ctrlKey){if(e.scaleVal<.6)return;e.scale(e.scaleVal-=.2)}},48:t=>{(t.metaKey||t.ctrlKey)&&e.scale(1)}};e.map.onkeydown=n=>{if(n.preventDefault(),e.editable&&n.target===n.currentTarget)if(8===n.keyCode||46===n.keyCode)e.currentLink?e.removeLink():e.currentSummary?e.removeSummary(e.currentSummary.summaryObj.id):e.removeNode();else{const e=t[n.keyCode];e&&e(n)}}}function kt(e,t){const n=(e,t)=>{const n=document.createElement("div");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-${t}"></use>\n  </svg>`,n},i=n("cm-add_child","zijiedian"),o=n("cm-add_sibling","tongjijiedian-"),s=n("cm-remove_child","shanchu2"),r=n("cm-up","rising"),l=n("cm-down","falling"),a=n("cm-edit","edit"),c=document.createElement("ul");if(c.className="menu-list",t&&t.extend)for(let e=0;e<t.extend.length;e++){const i=t.extend[e],o=n(i.name,i.name);c.appendChild(o),o.onclick=e=>{i.onclick(e)}}const d=document.createElement("mmenu");d.className="mobile-menu",d.appendChild(i),d.appendChild(o),d.appendChild(s),d.appendChild(r),d.appendChild(l),d.appendChild(a),d.hidden=!0,e.container.append(d);let h=!0;e.bus.addListener("unselectNode",(function(){d.hidden=!0})),e.bus.addListener("selectNode",(function(e){d.hidden=!1,h=!!e.root})),d.onclick=e=>{e.target===d&&(d.hidden=!0)},i.onclick=()=>{e.addChild()},o.onclick=()=>{h||e.insertSibling()},s.onclick=()=>{h||e.removeNode()},r.onclick=t=>{h||e.moveUpNode()},l.onclick=t=>{h||e.moveDownNode()},a.onclick=t=>{e.beginEdit()}}const ce=document,St=function(e,t){if(!t)return ae(e),e;const n=e.getElementsByClassName("insert-preview"),i=`insert-preview ${t} show`;if(n.length>0)n[0].className=i;else{const t=ce.createElement("div");t.className=i,e.appendChild(t)}return e},ae=function(e){if(!e)return;const t=e.getElementsByClassName("insert-preview");for(const e of t||[])e.remove()},be=function(e,t){const n=t.parentElement.parentElement.contains(e);return e&&"ME-TPC"===e.tagName&&e!==t&&!n&&!0!==e.nodeObj.root},Lt=function(e){const t=document.createElement("div");return t.className="mind-elixir-ghost",e.map.appendChild(t),t};function Mt(e){let t=null,n=null,i=null;const o=Lt(e);e.map.addEventListener("dragstart",(e=>{var n;const i=e.target;"ME-TPC"===(null==i?void 0:i.tagName)?(t=i,t.parentElement.parentElement.style.opacity="0.5",o.innerHTML=t.innerHTML,null==(n=e.dataTransfer)||n.setDragImage(o,0,0),D.clear()):e.preventDefault()})),e.map.addEventListener("dragend",(async o=>{if(!t)return;t.parentElement.parentElement.style.opacity="1";if(o.target.style.opacity="",!i)return;ae(i);const s=t.nodeObj;switch(n){case"before":e.moveNodeBefore(t,i),e.selectNode(E(s.id));break;case"after":e.moveNodeAfter(t,i),e.selectNode(E(s.id));break;case"in":e.moveNode(t,i)}t=null})),e.map.addEventListener("dragover",Ke((function(e){if(!t)return;ae(i);const o=ce.elementFromPoint(e.clientX,e.clientY-12);if(be(o,t)){i=o;const t=o.getBoundingClientRect().y;e.clientY>t+o.clientHeight?n="after":e.clientY>t+o.clientHeight/2&&(n="in")}else{const o=ce.elementFromPoint(e.clientX,e.clientY+12);if(be(o,t)){i=o;const t=o.getBoundingClientRect().y;e.clientY<t?n="before":e.clientY<t+o.clientHeight/2&&(n="in")}else n=i=null}i&&St(i,n)}),200))}function Tt(e){let t=[],n=-1,i=e.getData();e.bus.addListener("operation",(o=>{if("beginEdit"===o.name)return;t=t.slice(0,n+1);const s=e.getData();t.push({prev:i,currentNodeId:o.obj.id,next:s}),i=s,n=t.length-1,console.log("operation",o.obj.id,t)})),e.undo=function(){if(n>-1){const o=t[n];i=o.prev,e.refresh(o.prev),e.selectNode(E(o.currentNodeId)),n--,console.log("current",i)}},e.redo=function(){if(n<t.length-1){n++;const o=t[n];i=o.next,e.refresh(o.next),e.selectNode(E(o.currentNodeId))}},e.map.addEventListener("keydown",(t=>{(t.metaKey||t.ctrlKey)&&t.shiftKey&&"Z"===t.key?e.redo():(t.metaKey||t.ctrlKey)&&"z"===t.key&&e.undo()}))}const B=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">\n    <use xlink:href="#icon-${t}"></use>\n  </svg>`,n};function $t(e){const t=document.createElement("div"),n=B("fullscreen","full"),i=B("toCenter","living"),o=B("zoomout","move"),s=B("zoomin","add");return document.createElement("span").innerText="100%",t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(s),t.className="mind-elixir-toolbar rb",n.onclick=()=>{e.container.requestFullscreen()},i.onclick=()=>{e.toCenter()},o.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-=.2)},s.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+=.2)},t}function Dt(e){const t=document.createElement("div"),n=B("tbltl","left"),i=B("tbltr","right"),o=B("tblts","side");return t.appendChild(n),t.appendChild(i),t.appendChild(o),t.className="mind-elixir-toolbar lt",n.onclick=()=>{e.initLeft()},i.onclick=()=>{e.initRight()},o.onclick=()=>{e.initSide()},t}function Ot(e){e.container.append($t(e)),e.container.append(Dt(e))
/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */}var At=Object.defineProperty,Pt=(e,t,n)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t,n)=>(Pt(e,"symbol"!=typeof t?t+"":t,n),n);class jt{constructor(){w(this,"_listeners",new Map),w(this,"on",this.addEventListener),w(this,"off",this.removeEventListener),w(this,"emit",this.dispatchEvent)}addEventListener(e,t){const n=this._listeners.get(e)??new Set;return this._listeners.set(e,n),n.add(t),this}removeEventListener(e,t){var n;return null==(n=this._listeners.get(e))||n.delete(t),this}dispatchEvent(e,...t){let n=!0;for(const i of this._listeners.get(e)??[])n=!1!==i(...t)&&n;return n}unbindAllListeners(){this._listeners.clear()}}const ye=(e,t="px")=>"number"==typeof e?e+t:e;function O({style:e},t,n){if("object"==typeof t)for(const[n,i]of Object.entries(t))void 0!==i&&(e[n]=ye(i));else void 0!==n&&(e[t]=ye(n))}function Be(e){return(t,n,i,o={})=>{t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);for(const s of t)for(const t of n)s[e](t,i,{capture:!1,...o});return[t,n,i,o]}}const q=Be("addEventListener"),A=Be("removeEventListener"),Q=e=>{var t;const{clientX:n,clientY:i,target:o}=(null==(t=e.touches)?void 0:t[0])??e;return{x:n,y:i,target:o}};function xe(e,t,n="touch"){switch(n){case"center":{const n=t.left+t.width/2,i=t.top+t.height/2;return n>=e.left&&n<=e.right&&i>=e.top&&i<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}}function F(e,t=document){const n=Array.isArray(e)?e:[e];let i=[];for(let e=0,o=n.length;e<o;e++){const o=n[e];"string"==typeof o?i=i.concat(Array.from(t.querySelectorAll(o))):o instanceof Element&&i.push(o)}return i}const Ht=()=>matchMedia("(hover: none), (pointer: coarse)").matches,Bt=()=>"safari"in window,zt=e=>{let t,n=-1,i=!1;return{next(...o){t=o,i||(i=!0,n=requestAnimationFrame((()=>{e(...t),i=!1})))},cancel(){cancelAnimationFrame(n),i=!1}}},{abs:j,max:we,min:Ee,ceil:Ne}=Math;class ze extends jt{constructor(e){var t,n,i,o,s;super(),w(this,"_options"),w(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),w(this,"_area"),w(this,"_clippingElement"),w(this,"_targetElement"),w(this,"_targetRect"),w(this,"_selectables",[]),w(this,"_latestElement"),w(this,"_areaRect",new DOMRect),w(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),w(this,"_singleClick",!0),w(this,"_frame"),w(this,"_scrollAvailable",!0),w(this,"_scrollingActive",!1),w(this,"_scrollSpeed",{x:0,y:0}),w(this,"_scrollDelta",{x:0,y:0}),w(this,"disable",this._bindStartEvents.bind(this,!1)),w(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...e,behaviour:{overlap:"invert",intersect:"touch",...e.behaviour,startThreshold:null!=(t=e.behaviour)&&t.startThreshold?"number"==typeof e.behaviour.startThreshold?e.behaviour.startThreshold:{x:10,y:10,...e.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...null==(n=e.behaviour)?void 0:n.scrolling,startScrollMargins:{x:0,y:0,...null==(o=null==(i=e.behaviour)?void 0:i.scrolling)?void 0:o.startScrollMargins}}},features:{range:!0,touch:!0,...e.features,singleTap:{allow:!0,intersect:"native",...null==(s=e.features)?void 0:s.singleTap}}};for(const e of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))"function"==typeof this[e]&&(this[e]=this[e].bind(this));const{document:r,selectionAreaClass:l,selectionContainerClass:a}=this._options;this._area=r.createElement("div"),this._clippingElement=r.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(l),a&&this._clippingElement.classList.add(a),O(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),O(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=zt((e=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",e),this._redrawSelectionArea()})),this.enable()}_bindStartEvents(e=!0){const{document:t,features:n}=this._options,i=e?q:A;i(t,"mousedown",this._onTapStart),n.touch&&i(t,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(e,t=!1){const{x:n,y:i,target:o}=Q(e),{_options:s}=this,{document:r}=this._options,l=o.getBoundingClientRect(),a=F(s.startAreas,s.document),c=F(s.boundaries,s.document);this._targetElement=c.find((e=>xe(e.getBoundingClientRect(),l)));const d=e.composedPath();if(!this._targetElement||!a.find((e=>d.includes(e)))||!c.find((e=>d.includes(e)))||!t&&!1===this._emitEvent("beforestart",e))return;this._areaLocation={x1:n,y1:i,x2:0,y2:0};const h=r.scrollingElement??r.body;this._scrollDelta={x:h.scrollLeft,y:h.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),q(r,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),q(r,["mouseup","touchcancel","touchend"],this._onTapStop),q(r,"scroll",this._onScroll)}_onSingleTap(e){const{singleTap:{intersect:t},range:n}=this._options.features,i=Q(e);let o;if("native"===t)o=i.target;else if("touch"===t){this.resolveSelectables();const{x:e,y:t}=i;o=this._selectables.find((n=>{const{right:i,left:o,top:s,bottom:r}=n.getBoundingClientRect();return e<i&&e>o&&t<r&&t>s}))}if(!o)return;for(this.resolveSelectables();!this._selectables.includes(o);){if(!o.parentElement)return;o=o.parentElement}const{stored:s}=this._selection;if(this._emitEvent("start",e),e.shiftKey&&n&&this._latestElement){const e=this._latestElement,[t,n]=4&e.compareDocumentPosition(o)?[o,e]:[e,o],i=[...this._selectables.filter((e=>4&e.compareDocumentPosition(t)&&2&e.compareDocumentPosition(n))),t,n];this.select(i),this._latestElement=e}else s.includes(o)&&(1===s.length||e.ctrlKey||s.every((e=>this._selection.stored.includes(e))))?this.deselect(o):(this.select(o),this._latestElement=o);this._emitEvent("stop",e)}_delayedTapMove(e){const{container:t,document:n,behaviour:{startThreshold:i}}=this._options,{x1:o,y1:s}=this._areaLocation,{x:r,y:l}=Q(e);if("number"==typeof i&&j(r+l-(o+s))>=i||"object"==typeof i&&j(r-o)>=i.x||j(l-s)>=i.y){if(A(n,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),!1===this._emitEvent("beforedrag",e))return void A(n,["mouseup","touchcancel","touchend"],this._onTapStop);q(n,["mousemove","touchmove"],this._onTapMove,{passive:!1}),O(this._area,"display","block"),F(t,n)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(q(n,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter((e=>this._targetElement.contains(e)))),this._setupSelectionArea(),this._emitEvent("start",e),this._onTapMove(e)}this._handleMoveEvent(e)}_setupSelectionArea(){const{_clippingElement:e,_targetElement:t,_area:n}=this,i=this._targetRect=t.getBoundingClientRect();this._scrollAvailable?(O(e,{top:i.top,left:i.left,width:i.width,height:i.height}),O(n,{marginTop:-i.top,marginLeft:-i.left})):(O(e,{top:0,left:0,width:"100%",height:"100%"}),O(n,{marginTop:0,marginLeft:0}))}_onTapMove(e){const{x:t,y:n}=Q(e),{_scrollSpeed:i,_areaLocation:o,_options:s,_frame:r}=this,{speedDivider:l}=s.behaviour.scrolling,a=this._targetElement;if(o.x2=t,o.y2=n,this._scrollAvailable&&!this._scrollingActive&&(i.y||i.x)){this._scrollingActive=!0;const t=()=>{if(!i.x&&!i.y)return void(this._scrollingActive=!1);const{scrollTop:n,scrollLeft:s}=a;i.y&&(a.scrollTop+=Ne(i.y/l),o.y1-=a.scrollTop-n),i.x&&(a.scrollLeft+=Ne(i.x/l),o.x1-=a.scrollLeft-s),r.next(e),requestAnimationFrame(t)};requestAnimationFrame(t)}else r.next(e);this._handleMoveEvent(e)}_handleMoveEvent(e){const{features:t}=this._options;(t.touch&&matchMedia("(hover: none), (pointer: coarse)").matches||this._scrollAvailable&&"safari"in window)&&e.preventDefault()}_onScroll(){const{_scrollDelta:e,_options:{document:t}}=this,{scrollTop:n,scrollLeft:i}=t.scrollingElement??t.body;this._areaLocation.x1+=e.x-i,this._areaLocation.y1+=e.y-n,e.x=i,e.y=n,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(e){const{manualSpeed:t}=this._options.behaviour.scrolling,n=e.deltaY?e.deltaY>0?1:-1:0,i=e.deltaX?e.deltaX>0?1:-1:0;this._scrollSpeed.y+=n*t,this._scrollSpeed.x+=i*t,this._onTapMove(e),e.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:e,_areaLocation:t,_areaRect:n,_targetElement:i,_options:o}=this,{scrollTop:s,scrollHeight:r,clientHeight:l,scrollLeft:a,scrollWidth:c,clientWidth:d}=i,h=this._targetRect,{x1:p,y1:m}=t;let{x2:u,y2:f}=t;const{behaviour:{scrolling:{startScrollMargins:g}}}=o;u<h.left+g.x?(e.x=a?-j(h.left-u+g.x):0,u=u<h.left?h.left:u):u>h.right-g.x?(e.x=c-a-d?j(h.left+h.width-u-g.x):0,u=u>h.right?h.right:u):e.x=0,f<h.top+g.y?(e.y=s?-j(h.top-f+g.y):0,f=f<h.top?h.top:f):f>h.bottom-g.y?(e.y=r-s-l?j(h.top+h.height-f-g.y):0,f=f>h.bottom?h.bottom:f):e.y=0;const v=Ee(p,u),b=Ee(m,f),y=we(p,u),x=we(m,f);n.x=v,n.y=b,n.width=y-v,n.height=x-b}_redrawSelectionArea(){const{x:e,y:t,width:n,height:i}=this._areaRect,{style:o}=this._area;o.left=`${e}px`,o.top=`${t}px`,o.width=`${n}px`,o.height=`${i}px`}_onTapStop(e,t){var n;const{document:i,features:o}=this._options,{_singleClick:s}=this;A(i,["mousemove","touchmove"],this._delayedTapMove),A(i,["touchmove","mousemove"],this._onTapMove),A(i,["mouseup","touchcancel","touchend"],this._onTapStop),A(i,"scroll",this._onScroll),this._keepSelection(),e&&s&&o.singleTap.allow?this._onSingleTap(e):!s&&!t&&(this._updateElementSelection(),this._emitEvent("stop",e)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&A(i,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),null==(n=this._frame)||n.cancel(),O(this._area,"display","none")}_updateElementSelection(){const{_selectables:e,_options:t,_selection:n,_areaRect:i}=this,{stored:o,selected:s,touched:r}=n,{intersect:l,overlap:a}=t.behaviour,c="invert"===a,d=[],h=[],p=[];for(let t=0;t<e.length;t++){const n=e[t];if(xe(i,n.getBoundingClientRect(),l)){if(s.includes(n))o.includes(n)&&!r.includes(n)&&r.push(n);else{if(c&&o.includes(n)){p.push(n);continue}h.push(n)}d.push(n)}}c&&h.push(...o.filter((e=>!s.includes(e))));const m="keep"===a;for(let e=0;e<s.length;e++){const t=s[e];!d.includes(t)&&(!m||!o.includes(t))&&p.push(t)}n.selected=d,n.changed={added:h,removed:p},this._latestElement=void 0}_emitEvent(e,t){return this.emit(e,{event:t,store:this._selection,selection:this})}_keepSelection(){const{_options:e,_selection:t}=this,{selected:n,changed:i,touched:o,stored:s}=t,r=n.filter((e=>!s.includes(e)));switch(e.behaviour.overlap){case"drop":t.stored=[...r,...s.filter((e=>!o.includes(e)))];break;case"invert":t.stored=[...r,...s.filter((e=>!i.removed.includes(e)))];break;case"keep":t.stored=[...s,...n.filter((e=>!s.includes(e)))]}}trigger(e,t=!0){this._onTapStart(e,t)}resolveSelectables(){this._selectables=F(this._options.selectables,this._options.document)}clearSelection(e=!0,t=!1){const{selected:n,stored:i,changed:o}=this._selection;o.added=[],o.removed.push(...n,...e?i:[]),t||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:e?[]:i,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(e=!1){this._onTapStop(null,!e)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(e,t=!1){const{changed:n,selected:i,stored:o}=this._selection,s=F(e,this._options.document).filter((e=>!i.includes(e)&&!o.includes(e)));return o.push(...s),i.push(...s),n.added.push(...s),n.removed=[],this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)),s}deselect(e,t=!1){const{selected:n,stored:i,changed:o}=this._selection,s=F(e,this._options.document).filter((e=>n.includes(e)||i.includes(e)));s.length&&(this._selection.stored=i.filter((e=>!s.includes(e))),this._selection.selected=n.filter((e=>!s.includes(e))),this._selection.changed.added=[],this._selection.changed.removed.push(...s.filter((e=>!o.removed.includes(e)))),this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}function Rt(e){const t=new ze({selectables:[".map-container me-tpc"],boundaries:[e.container],container:e.container,behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",(({event:e})=>!(0!==e.button||"ME-TPC"===e.target.tagName||"input-box"===e.target.id||"circle"===e.target.className))).on("start",(({event:n})=>{!n.ctrlKey&&!n.metaKey&&(e.unselectNode(),e.unselectNodes(),e.unselectSummary(),e.unselectLink(),t.clearSelection(!0,!0))})).on("move",(({store:{changed:{added:e,removed:t}}})=>{D.moved=!0;for(const t of e)t.classList.add("selected");for(const e of t)e.classList.remove("selected")})).on("stop",(({store:{stored:t}})=>{console.log(t,"stored"),e.selectNodes(t)}))}w(ze,"version","3.3.1");const qt=function(e,t=!0){this.theme=e;const n=this.theme.cssVar,i=Object.keys(n);for(let e=0;e<i.length;e++){const t=i[e];this.mindElixirBox.style.setProperty(t,n[t])}t&&this.refresh()};function Re(e){return{nodeData:e.isFocusMode?e.nodeDataBackup:e.nodeData,linkData:e.linkData,summaries:e.summaries,direction:e.direction,theme:e.theme}}const Ft=function(e,t,n){if(e){if(console.time("selectNode"),"string"==typeof e){const t=E(e);return t?this.selectNode(t):void 0}this.currentNode&&(this.currentNode.className=""),e.className="selected",e.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj):this.bus.fire("selectNode",e.nodeObj,n),console.timeEnd("selectNode")}},Vt=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},Wt=function(e){if(e){console.time("selectNodes");for(const t of e)t.className="selected";this.currentNodes=e,this.bus.fire("selectNodes",e.map((e=>e.nodeObj))),console.timeEnd("selectNodes")}},Yt=function(){if(this.currentNodes)for(const e of this.currentNodes)e.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},It=function(){if(!this.currentNode||"meroot"===this.currentNode.dataset.nodeid)return!1;const e=this.currentNode.parentElement.parentElement.nextSibling;let t;return!!e&&(t=e.firstChild.firstChild,this.selectNode(t),!0)},Xt=function(){if(!this.currentNode||"meroot"===this.currentNode.dataset.nodeid)return!1;const e=this.currentNode.parentElement.parentElement.previousSibling;let t;return!!e&&(t=e.firstChild.firstChild,this.selectNode(t),!0)},Kt=function(){if(!this.currentNode)return;const e=this.currentNode.parentElement.nextSibling;if(e&&e.firstChild){const t=e.firstChild.firstChild.firstChild;this.selectNode(t)}},Ut=function(){if(!this.currentNode||"meroot"===this.currentNode.dataset.nodeid)return;const e=this.currentNode.parentElement.parentElement.parentElement.previousSibling;if(e){const t=e.firstChild;this.selectNode(t)}},Gt=function(){const e=Re(this);return JSON.stringify(e,((e,t)=>{if("parent"!==e||"string"==typeof t)return t}))},Jt=function(){return JSON.parse(this.getDataString())},Qt=function(){const e=Re(this).nodeData;let t="# "+e.topic+"\n\n";return function e(n,i){for(let o=0;o<n.length;o++)t+=i<=6?"".padStart(i,"#")+" "+n[o].topic+"\n\n":"".padStart(i-7,"\t")+"- "+n[o].topic+"\n",n[o].children&&e(n[o].children||[],i+1)}(e.children||[],2),t},Zt=function(){this.editable=!0},en=function(){this.editable=!1},tn=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")"},nn=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},on=function(e){e(this)},sn=function(e){e.nodeObj.root||(null===this.tempDirection&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},rn=function(){this.isFocusMode=!1,null!==this.tempDirection&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},ln=function(){this.direction=0,this.refresh()},cn=function(){this.direction=1,this.refresh()},an=function(){this.direction=2,this.refresh()},dn=function(e){this.locale=e,this.refresh()},hn=function(e,t){const n=e.nodeObj;"boolean"==typeof t?n.expanded=t:!1!==n.expanded?n.expanded=!1:n.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",n)},un=function(e){e&&(e=JSON.parse(JSON.stringify(e)),this.nodeData=e.nodeData,this.linkData=e.linkData||{}),T(this.nodeData),this.layout(),this.linkDiv()},fn=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:rn,disableEdit:en,enableEdit:Zt,expandNode:hn,focusNode:sn,getData:Jt,getDataMd:Qt,getDataString:Gt,initLeft:ln,initRight:cn,initSide:an,install:on,refresh:un,scale:tn,selectFirstChild:Kt,selectNextSibling:It,selectNode:Ft,selectNodes:Wt,selectParent:Ut,selectPrevSibling:Xt,setLocale:dn,toCenter:nn,unselectNode:Vt,unselectNodes:Yt},Symbol.toStringTag,{value:"Module"})),re=function(e){const t=e.parentElement.parentElement.lastElementChild;"svg"===(null==t?void 0:t.tagName)&&(null==t||t.remove())},qe=function(e,t){var n,i;if(0===e)return 0;if(1===e)return 1;if(2===e){return((null==(n=document.querySelector(".lhs"))?void 0:n.childElementCount)||0)<=((null==(i=document.querySelector(".rhs"))?void 0:i.childElementCount)||0)?(t.direction=0,0):(t.direction=1,1)}},pn=function(e,t){console.log(t);const n=e.nodeObj,i=De(n);i.style&&t.style&&(t.style=Object.assign(i.style,t.style));const o=Object.assign(n,t);de(e,o),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:o,origin:i})},mn=function(e,t){var n,i,o;const s=e||this.currentNode;if(!s)return;const r=s.nodeObj;if(!0===r.root)return void this.addChild();if(!0===(null==(n=r.parent)?void 0:n.root)&&1===(null==(o=null==(i=r.parent)?void 0:i.children)?void 0:o.length))return void this.addChild(E(r.parent.id));const l=t||this.generateNewObj();Ze(r,l),T(this.nodeData);const a=s.parentElement;console.time("insertSibling_DOM");const{grp:c,top:d}=this.createWrapper(l);a.parentNode.parentNode.insertBefore(c,a.parentNode.nextSibling),this.linkDiv(c.offsetParent),t||this.editTopic(d.firstChild),this.selectNode(d.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",obj:l})},gn=function(e,t){const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(!0===i.root)return void this.addChild();const o=t||this.generateNewObj();et(i,o),T(this.nodeData);const s=n.parentElement;console.time("insertSibling_DOM");const{grp:r,top:l}=this.createWrapper(o);s.parentNode.parentNode.insertBefore(r,s.parentNode),this.linkDiv(r.offsetParent),t||this.editTopic(l.firstChild),this.selectNode(l.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertBefore",obj:o})},vn=function(e,t){const n=e||this.currentNode;if(!n)return;re(n);const i=n.nodeObj;if(!0===i.root)return;const o=t||this.generateNewObj();tt(i,o),T(this.nodeData);const s=n.parentElement.parentElement;console.time("insertParent_DOM");const{grp:r,top:l}=this.createWrapper(o,!0);l.appendChild(se(!0)),s.insertAdjacentElement("afterend",r);const a=this.createChildren([s]);l.insertAdjacentElement("afterend",a),this.linkDiv(),t||this.editTopic(l.firstChild),this.selectNode(l.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:o})},Fe=function(e,t){var n,i;if(!e)return null;const o=e.nodeObj;!1===o.expanded&&(this.expandNode(e,!0),e=E(o.id));const s=t||this.generateNewObj();o.children?o.children.push(s):o.children=[s],T(this.nodeData);const r=e.parentElement,{grp:l,top:a}=this.createWrapper(s);if("ME-PARENT"===r.tagName){if(r.children[1])r.nextSibling.appendChild(l);else{const e=this.createChildren([l]);r.appendChild(se(!0)),r.insertAdjacentElement("afterend",e)}this.linkDiv(l.offsetParent)}else"ME-ROOT"===r.tagName&&(0===qe(this.direction,s)?null==(n=document.querySelector(".lhs"))||n.appendChild(l):null==(i=document.querySelector(".rhs"))||i.appendChild(l),this.linkDiv());return{newTop:a,newNodeObj:s}},bn=function(e,t){console.time("addChild");const n=e||this.currentNode;if(!n)return;const i=Fe.call(this,n,t);if(!i)return;const{newTop:o,newNodeObj:s}=i;this.bus.fire("operation",{name:"addChild",obj:s}),console.timeEnd("addChild"),t||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0)},yn=function(e,t){console.time("copyNode");const n=De(e.nodeObj);Te(n);const i=Fe.call(this,t,n);if(!i)return;const{newNodeObj:o}=i;console.timeEnd("copyNode"),this.bus.fire("operation",{name:"copyNode",obj:o})},xn=function(e){const t=e||this.currentNode;if(!t)return;const n=t.parentNode.parentNode,i=t.nodeObj;Je(i),n.parentNode.insertBefore(n,n.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:i})},wn=function(e){const t=e||this.currentNode;if(!t)return;const n=t.parentNode.parentNode,i=t.nodeObj;Qe(i),n.nextSibling?n.nextSibling.insertAdjacentElement("afterend",n):n.parentNode.prepend(n),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:i})},En=function(e){var t;const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(!0===i.root)throw new Error("Can not remove root node");const o=i.parent.children,s=o.findIndex((e=>e===i)),r=oe(i),l=n.parentNode;if(0===r){const e=l.parentNode.parentNode;"ME-MAIN"!==e.tagName&&e.previousSibling.children[1].remove()}if(0!==o.length){const e=o[s]||o[s-1];this.selectNode(E(e.id))}else this.selectNode(E(i.parent.id));l.parentNode.remove(),this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:i,originIndex:s,originParentId:null==(t=null==i?void 0:i.parent)?void 0:t.id})},Nn=function(e,t){var n;const i=e.nodeObj,o=t.nodeObj,s=null==(n=null==i?void 0:i.parent)?void 0:n.id;if(!1===o.expanded&&(this.expandNode(t,!0),e=E(i.id),t=E(o.id)),!Ge(i,o))return void console.warn("Invalid move");console.time("moveNode"),nt(i,o),T(this.nodeData);const r=e.parentElement,l=t.parentElement;if("ME-PARENT"===l.tagName)if(re(e),l.children[1])l.nextSibling.appendChild(r.parentElement);else{const e=this.createChildren([r.parentElement]);l.appendChild(se(!0)),l.parentElement.insertBefore(e,l.nextSibling)}else"ME-ROOT"===l.tagName&&(qe(this.direction,i),l.nextSibling.appendChild(r.parentElement));this.linkDiv(),this.bus.fire("operation",{name:"moveNode",obj:i,toObj:o,originParentId:s}),console.timeEnd("moveNode")},Cn=function(e,t){var n;const i=e.nodeObj,o=t.nodeObj,s=null==(n=i.parent)?void 0:n.id;it(i,o),T(this.nodeData),re(e);const r=e.parentElement.parentNode;t.parentElement.parentNode.insertAdjacentElement("beforebegin",r),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeBefore",obj:i,toObj:o,originParentId:s})},_n=function(e,t){var n;const i=e.nodeObj,o=t.nodeObj,s=null==(n=i.parent)?void 0:n.id;ot(i,o),T(this.nodeData),re(e);const r=e.parentElement.parentElement;t.parentElement.parentElement.insertAdjacentElement("afterend",r),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeAfter",obj:i,toObj:o,originParentId:s})},kn=function(e){const t=e||this.currentNode;t&&this.editTopic(t)},Sn=function(e,t){e.text.textContent=t,e.nodeObj.topic=t,this.linkDiv()},Ve=Object.freeze(Object.defineProperty({__proto__:null,addChild:bn,beginEdit:kn,copyNode:yn,insertBefore:gn,insertParent:vn,insertSibling:mn,moveDownNode:wn,moveNode:Nn,moveNodeAfter:_n,moveNodeBefore:Cn,moveUpNode:xn,removeNode:En,reshapeNode:pn,setNodeTopic:Sn},Symbol.toStringTag,{value:"Module"})),Ln=function(e){return{dom:e,mousedown:!1,lastX:0,lastY:0,handleMouseMove(e){if(this.mousedown){if(!this.lastX)return this.lastX=e.pageX,void(this.lastY=e.pageY);const t=this.lastX-e.pageX,n=this.lastY-e.pageY;this.cb&&this.cb(t,n),this.lastX=e.pageX,this.lastY=e.pageY}},handleMouseDown(e){this.mousedown=!0},handleClear(e){this.clear()},cb:null,init(e,t){this.cb=t,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mouseleave",this.handleClear),e.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(e){e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("mouseleave",this.handleClear),e.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.mousedown=!1,this.lastX=0,this.lastY=0}}},Ce={create:Ln};function ie(e,t,n){const{offsetLeft:i,offsetTop:o}=W(e.nodes,t),s=t.offsetWidth,r=t.offsetHeight,l=i+s/2,a=o+r/2;return{w:s,h:r,cx:l,cy:a,ctrlX:l+n.x,ctrlY:a+n.y}}function V(e){let t,n;const i=(e.cy-e.ctrlY)/(e.ctrlX-e.cx);return i>e.h/e.w||i<-e.h/e.w?e.cy-e.ctrlY<0?(t=e.cx-e.h/2/i,n=e.cy+e.h/2):(t=e.cx+e.h/2/i,n=e.cy-e.h/2):e.cx-e.ctrlX<0?(t=e.cx+e.w/2,n=e.cy-e.w*i/2):(t=e.cx-e.w/2,n=e.cy+e.w*i/2),{x:t,y:n}}const Mn=function(e,t,n,i){const o=document.createElementNS("http://www.w3.org/2000/svg","text");return N(o,{"text-anchor":"middle",x:t+"",y:n+"",fill:i||"#666"}),o.dataset.type="custom-link",o.innerHTML=e,o},Tn=function(e,t,n,i){if(!e||!t)return;const o=performance.now();this.hideLinkController();const s=ie(this,e,n.delta1),r=ie(this,t,n.delta2),{x:l,y:a}=V(s),{ctrlX:c,ctrlY:d}=s,{ctrlX:h,ctrlY:p}=r,{x:m,y:u}=V(r),f=$e(h,p,m,u),g=vt(`M ${l} ${a} C ${c} ${d} ${h} ${p} ${m} ${u}`,`M ${f.x1} ${f.y1} L ${m} ${u} L ${f.x2} ${f.y2}`),v=l/8+3*c/8+3*h/8+m/8,b=a/8+3*d/8+3*p/8+u/8,y=Mn(n.label,v,b,this.theme.cssVar["--color"]);g.appendChild(y),g.linkObj=n,g.dataset.linkid=n.id,this.linkSvgGroup.appendChild(g),i||(this.linkData[n.id]=n,this.currentLink=g,this.showLinkController(n,s,r));const x=performance.now();console.log(`DrawCustomLink Execution time: ${x-o} ms`)},$n=function(e,t){const n={id:U(),label:"Custom Link",from:e.nodeObj.id,to:t.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};this.drawCustomLink(e,t,n)},Dn=function(e){let t;if(t=e||this.currentLink,!t)return;this.hideLinkController();const n=t.linkObj.id;delete this.linkData[n],t.remove()},On=function(e){this.currentLink=e;const t=e.linkObj,n=E(t.from),i=E(t.to),o=ie(this,n,t.delta1),s=ie(this,i,t.delta2);this.showLinkController(t,o,s)},An=function(){this.currentLink=null,this.hideLinkController()},Pn=function(){this.linkController.style.display="none",this.P2.style.display="none",this.P3.style.display="none"},jn=function(e,t,n){this.linkController.style.display="initial",this.P2.style.display="initial",this.P3.style.display="initial",this.nodes.appendChild(this.linkController),this.nodes.appendChild(this.P2),this.nodes.appendChild(this.P3);let{x:i,y:o}=V(t),{ctrlX:s,ctrlY:r}=t,{ctrlX:l,ctrlY:a}=n,{x:c,y:d}=V(n);this.P2.style.cssText=`top:${r}px;left:${s}px;`,this.P3.style.cssText=`top:${a}px;left:${l}px;`,N(this.line1,{x1:i+"",y1:o+"",x2:s+"",y2:r+""}),N(this.line2,{x1:l+"",y1:a+"",x2:c+"",y2:d+""}),this.helper1&&(this.helper1.destory(this.map),this.helper2.destory(this.map)),this.helper1=Ce.create(this.P2),this.helper2=Ce.create(this.P3),this.helper1.init(this.map,((n,h)=>{var p;s-=n/this.scaleVal,r-=h/this.scaleVal;const m=V({...t,ctrlX:s,ctrlY:r});i=m.x,o=m.y;const u=i/8+3*s/8+3*l/8+c/8,f=o/8+3*r/8+3*a/8+d/8;this.P2.style.top=r+"px",this.P2.style.left=s+"px",null==(p=this.currentLink)||p.children[0].setAttribute("d",`M ${i} ${o} C ${s} ${r} ${l} ${a} ${c} ${d}`),N(this.currentLink.children[2],{x:u+"",y:f+""}),N(this.line1,{x1:i+"",y1:o+"",x2:s+"",y2:r+""}),e.delta1.x=s-t.cx,e.delta1.y=r-t.cy})),this.helper2.init(this.map,((t,h)=>{var p,m;l-=t/this.scaleVal,a-=h/this.scaleVal;const u=V({...n,ctrlX:l,ctrlY:a});c=u.x,d=u.y;const f=i/8+3*s/8+3*l/8+c/8,g=o/8+3*r/8+3*a/8+d/8,v=$e(l,a,c,d);this.P3.style.top=a+"px",this.P3.style.left=l+"px",null==(p=this.currentLink)||p.children[0].setAttribute("d",`M ${i} ${o} C ${s} ${r} ${l} ${a} ${c} ${d}`),null==(m=this.currentLink)||m.children[1].setAttribute("d",`M ${v.x1} ${v.y1} L ${c} ${d} L ${v.x2} ${v.y2}`),N(this.currentLink.children[2],{x:f+"",y:g+""}),N(this.line2,{x1:l+"",y1:a+"",x2:c+"",y2:d+""}),e.delta2.x=l-n.cx,e.delta2.y=a-n.cy}))};function Hn(){this.linkSvgGroup.innerHTML="";for(const e in this.linkData){const t=this.linkData[e];this.drawCustomLink(E(t.from),E(t.to),t,!0)}this.nodes.appendChild(this.linkSvgGroup)}function Bn(e){if(console.time("editSummary"),!e)return;const t=e.children[2];console.log(t,e),Ae(this,t,(n=>{var i;const o=e.linkObj,s=(null==(i=n.textContent)?void 0:i.trim())||"";o.label=""===s?origin:s,n.remove(),s!==origin&&(t.innerHTML=o.label,this.linkDiv())})),console.timeEnd("editSummary")}function zn(){for(const e in this.linkData){const t=this.linkData[e];(!te(t.from,this.nodeData)||!te(t.to,this.nodeData))&&delete this.linkData[t.id]}}const Rn=Object.freeze(Object.defineProperty({__proto__:null,createLink:$n,drawCustomLink:Tn,editCutsomLinkLabel:Bn,hideLinkController:Pn,removeLink:Dn,renderCustomLink:Hn,selectLink:On,showLinkController:jn,tidyCustomLink:zn,unselectLink:An},Symbol.toStringTag,{value:"Module"})),qn=function(e){var t,n;if(0===e.length)throw new Error("No selected node.");if(1===e.length){const t=e[0].nodeObj,n=e[0].nodeObj.parent;if(!n)throw new Error("Can not select root node.");const i=n.children.findIndex((e=>t===e));return{parent:n.id,start:i,end:i}}let i=0;const o=e.map((e=>{let t=e.nodeObj;const n=[];for(;t.parent;){const e=t.parent,i=e.children,o=null==i?void 0:i.indexOf(t);t=e,n.unshift({node:t,index:o})}return n.length>i&&(i=n.length),n}));let s=0;e:for(;s<i;s++){const e=null==(t=o[0][s])?void 0:t.node;for(let t=1;t<o.length;t++)if((null==(n=o[t][s])?void 0:n.node)!==e)break e}if(!s)throw new Error("Can not select root node.");const r=o.map((e=>e[s-1].index)).sort(),l=r[0]||0,a=r[r.length-1]||0,c=o[0][s-1].node;if(c.root)throw new Error("Please select nodes in the same main topic.");return{parent:c.id,start:l,end:a}},Fn=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t},_e=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","path");return N(n,{d:e,stroke:t||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),n},ke=function(e,t,n,i,o){const s=document.createElementNS("http://www.w3.org/2000/svg","text");return N(s,{"text-anchor":i,x:t+"",y:n+"",fill:o||"#666"}),s.innerHTML=e,s},Vn=e=>E(e).parentElement.parentElement,Wn=function({parent:e,start:t}){var n,i;const o=E(e),s=o.nodeObj;let r;return r=!0===s.root?null==(n=E(s.children[t].id).closest("me-main"))?void 0:n.className:null==(i=o.closest("me-main"))?void 0:i.className,r},We=function(e,t){var n;const{id:i,text:o,parent:s,start:r,end:l}=t,a=e.nodes,c=E(s).nodeObj,d=Wn(t);let h,p,m=1/0,u=0,f=0,g=0;for(let t=r;t<=l;t++){const o=null==(n=c.children)?void 0:n[t];if(!o)return console.warn("Child not found"),e.removeSummary(i),null;const s=Vn(o.id),{offsetLeft:d,offsetTop:h}=W(a,s);t===r&&(f=h),t===l&&(g=h+s.offsetHeight),d<m&&(m=d),s.offsetWidth+d>u&&(u=s.offsetWidth+d)}const v=f+10,b=g+10,y=(v+b)/2,x=e.theme.cssVar["--color"];"lhs"===d?(h=_e(`M ${m+10} ${v} c -5 0 -10 5 -10 10 L ${m} ${b-10} c 0 5 5 10 10 10 M ${m} ${y} h -10`,x),p=ke(o,m-20,y+6,"end",x)):(h=_e(`M ${u-10} ${v} c 5 0 10 5 10 10 L ${u} ${b-10} c 0 5 -5 10 -10 10 M ${u} ${y} h 10`,x),p=ke(o,u+20,y+6,"start",x));const N=Fn("s-"+i);return N.appendChild(h),N.appendChild(p),N.summaryObj=t,e.summarySvg.appendChild(N),N},Yn=function(){let e=[];this.currentNode?e=[this.currentNode]:this.currentNodes&&(e=this.currentNodes);const{parent:t,start:n,end:i}=qn(e),o={id:U(),parent:t,start:n,end:i,text:"summary"},s=We(this,o);this.summaries.push(o),this.editSummary(s)},In=function(e){var t;const n=this.summaries.findIndex((t=>t.id===e));n>-1&&(this.summaries.splice(n,1),null==(t=document.querySelector("#s-"+e))||t.remove())},Xn=function(e){const t=e.children[1].getBBox(),n=document.createElementNS("http://www.w3.org/2000/svg","rect");N(n,{x:t.x-6+"",y:t.y-6+"",width:t.width+12+"",height:t.height+12+"",rx:"3",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),n.classList.add("selected"),e.appendChild(n),this.currentSummary=e},Kn=function(){var e,t;null==(t=null==(e=this.currentSummary)?void 0:e.querySelector("rect"))||t.remove(),this.currentSummary=null},Un=function(){this.summarySvg.innerHTML="",this.summaries.forEach((e=>{We(this,e)})),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},Gn=function(e){if(console.time("editSummary"),!e)return;const t=e.childNodes[1];Ae(this,t,(n=>{var i;const o=e.summaryObj,s=(null==(i=n.textContent)?void 0:i.trim())||"";o.text=""===s?origin:s,n.remove(),s!==origin&&(t.innerHTML=o.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:o,origin:origin}))})),console.timeEnd("editSummary")},Jn=Object.freeze(Object.defineProperty({__proto__:null,createSummary:Yn,editSummary:Gn,removeSummary:In,renderSummary:Un,selectSummary:Xn,unselectSummary:Kn},Symbol.toStringTag,{value:"Module"}));function Qn(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return N(n,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:e,width:t}),n}function Zn(e,t){return(parseInt(e)-parseInt(t))/2}function ei(e,t,n,i){const o=document.createElementNS("http://www.w3.org/2000/svg","g");let s="";return s=e.text?e.text.textContent:e.childNodes[0].textContent,s.split("\n").forEach(((e,s)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","text");N(r,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+Zn(t.lineHeight,t.fontSize)*(s+1)+parseFloat(t.fontSize)*(s+1)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),r.innerHTML=e,o.appendChild(r)})),o}function ti(e,t,n,i){let o="";o=e.text?e.text.textContent:e.childNodes[0].textContent;const s=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");N(s,{x:n+parseInt(t.paddingLeft)+"",y:i+parseInt(t.paddingTop)+"",width:t.width,height:t.height});const r=document.createElement("div");return N(r,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${t.fontFamily}; font-size: ${t.fontSize}; font-weight: ${t.fontWeight}; color: ${t.color}; white-space: pre-wrap;`}),r.innerHTML=o,s.appendChild(r),s}function le(e,t,n=!1){const i=getComputedStyle(t),{offsetLeft:o,offsetTop:s}=W(e.nodes,t),r=document.createElementNS("http://www.w3.org/2000/svg","rect");N(r,{x:o+"",y:s+"",rx:i.borderRadius,ry:i.borderRadius,width:i.width,height:i.height,fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth});const l=document.createElementNS("http://www.w3.org/2000/svg","g");let a;return l.appendChild(r),a=n?ti(t,i,o,s):ei(t,i,o,s),l.appendChild(a),l}function ni(e,t){const n=getComputedStyle(t),{offsetLeft:i,offsetTop:o}=W(e.nodes,t),s=document.createElementNS("http://www.w3.org/2000/svg","a"),r=document.createElementNS("http://www.w3.org/2000/svg","text");return N(r,{x:i+"",y:o+parseInt(n.fontSize)+"","text-anchor":"start","font-family":n.fontFamily,"font-size":`${n.fontSize}`,"font-weight":`${n.fontWeight}`,fill:`${n.color}`}),r.innerHTML=t.textContent,s.appendChild(r),s.setAttribute("href",t.href),s}const Z=100,ii='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',Ye=(e,t=!1)=>{var n,i,o;const s=e.nodes,r=s.offsetHeight+200,l=s.offsetWidth+200,a=Qn(r+"px",l+"px"),c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=document.createElementNS("http://www.w3.org/2000/svg","rect");N(d,{x:"0",y:"0",width:`${l}`,height:`${r}`,fill:e.theme.cssVar["--bgcolor"]}),a.appendChild(d),s.querySelectorAll(".subLines").forEach((e=>{const t=e.cloneNode(!0),{offsetLeft:n,offsetTop:i}=W(s,e.parentElement);t.setAttribute("x",`${n}`),t.setAttribute("y",`${i}`),c.appendChild(t)}));const h=null==(n=s.querySelector(".lines"))?void 0:n.cloneNode(!0);h&&c.appendChild(h);const p=null==(i=s.querySelector(".topiclinks"))?void 0:i.cloneNode(!0);p&&c.appendChild(p);const m=null==(o=s.querySelector(".summary"))?void 0:o.cloneNode(!0);return m&&c.appendChild(m),s.querySelectorAll("me-tpc").forEach((n=>{c.appendChild(le(e,n,!t))})),s.querySelectorAll(".tags > span").forEach((t=>{c.appendChild(le(e,t))})),s.querySelectorAll(".icons > span").forEach((t=>{c.appendChild(le(e,t))})),s.querySelectorAll(".hyper-link").forEach((t=>{c.appendChild(ni(e,t))})),N(c,{x:Z+"",y:Z+"",overflow:"visible"}),a.appendChild(c),ii+a.outerHTML};function oi(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=e=>{t(e.target.result)},i.onerror=e=>{n(e)},i.readAsDataURL(e)}))}const si=function(e=!1){const t=Ye(this,e);return new Blob([t],{type:"image/svg+xml"})},ri=async function(e=!1){const t=Ye(this,e),n=new Blob([t],{type:"image/svg+xml"}),i=await oi(n);return new Promise(((e,t)=>{const n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=()=>{const t=document.createElement("canvas");t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),t.toBlob(e,"image/png",1)},n.src=i,n.onerror=t}))},li=Object.freeze(Object.defineProperty({__proto__:null,exportPng:ri,exportSvg:si},Symbol.toStringTag,{value:"Module"}));function ci(e,t){return async function(...n){const i=this.before[t];i&&!await i.apply(this,n)||e.apply(this,n)}}const Se=Object.keys(Ve),Ie={};for(let e=0;e<Se.length;e++){const t=Se[e];Ie[t]=ci(Ve[t],t)}const ai={getObjById:te,generateNewObj:Ue,layout:lt,linkDiv:bt,editTopic:pt,createWrapper:dt,createParent:ht,createChildren:ut,createTopic:ft,findEle:E,changeTheme:qt,...fn,...Ie,...Rn,...Jn,...li,init(e){if(!e||!e.nodeData)return new Error("MindElixir: `data` is required");void 0!==e.direction&&(this.direction=e.direction),this.changeTheme(e.theme||this.theme,!1),this.nodeData=e.nodeData,T(this.nodeData),this.linkData=e.linkData||{},this.summaries=e.summaries||[],this.tidyCustomLink(),this.toolBar&&Ot(this),this.keypress&&_t(this),this.editable&&Rt(this),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.mobileMenu?kt(this):this.contextMenu&&Et(this,this.contextMenuOption),this.draggable&&Mt(this),this.allowUndo&&Tt(this),this.toCenter(),this.layout(),this.linkDiv()}},I=document;function $({el:e,direction:t,locale:n,draggable:i,editable:o,contextMenu:s,contextMenuOption:r,toolBar:l,keypress:a,before:c,newTopicName:d,allowUndo:h,mainLinkStyle:p,subLinkStyle:m,overflowHidden:u,mobileMenu:f,theme:g}){console.log("ME_version "+$.version,this);let v=null;const b=Object.prototype.toString.call(e);if("[object HTMLDivElement]"===b?v=e:"[object String]"===b&&(v=document.querySelector(e)),!v)throw new Error("MindElixir: el is not a valid element");v.className+=" mind-elixir",v.innerHTML="",v.style.setProperty("--gap","30px"),this.mindElixirBox=v,this.before=c||{},this.locale=n||"en",this.contextMenuOption=r,this.contextMenu=void 0===s||s,this.toolBar=void 0===l||l,this.keypress=void 0===a||a,this.mobileMenu=f||!1,this.direction="number"==typeof t?t:1,this.draggable=void 0===i||i,this.newTopicName=d||"new node",this.editable=void 0===o||o,this.allowUndo=void 0!==h&&h,this.currentNode=null,this.currentLink=null,this.scaleVal=1,this.tempDirection=null,this.mainLinkStyle=p||0,this.subLinkStyle=m||0,this.overflowHidden=u||!1,this.bus=rt.create(),this.container=I.createElement("div"),this.container.className="map-container";const y=window.matchMedia("(prefers-color-scheme: dark)");this.theme=g||(y.matches?Me:Le);const x=I.createElement("div");x.className="map-canvas",this.map=x,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=I.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=X("lines"),this.summarySvg=X("summary"),this.linkController=X("linkcontroller"),this.P2=I.createElement("div"),this.P3=I.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=pe(),this.line2=pe(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=X("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":st(this)}$.prototype=ai,$.LEFT=0,$.RIGHT=1,$.SIDE=2,$.THEME=Le,$.DARK_THEME=Me,$.version="3.2.6",$.E=E,$.new=e=>({nodeData:{id:U(),topic:e||"new topic",root:!0,children:[]},linkData:{}});export{$ as default};
//# sourceMappingURL=/sm/6a959570e2bb170e3017d39ba4eb076aad9664e7b5c74b933089ff2e79bfe2e3.map